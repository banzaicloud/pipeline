openapi: 3.0.0
info:
    description: Pipeline v0.3.0 swagger
    version: "0.3.0"
    title: Pipeline API
    contact:
        email: info@banzaicloud.com
    license:
        name: Apache 2.0
        url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
servers:
    - url: http://localhost:9090
tags:
    - name: clusters
      description: Clusters realted funtions
    - name: spotguides
      description: Application spotguides
    - name: deployments
      description: Deployment related functions for a cluster
    - name: profiles
      description: Cluster profiles related functions
    - name: auth
      description: Auth related functions
    - name: secrets
      description: Secrets related functions
    - name: organizations
      description: Organizations related functions
    - name: common
      description: Common API functions
    - name: users
      description: Users related functions
    - name: info
      description: Cloud config related functions
    - name: storage
      description: Storage related functions
    - name: hpa
      description: Horizontal Pod Autoscaling related functions
    - name: projects
      description: Google projects related operations
    - name: domain
      description: Domain related information

paths:
    '/api/v1/orgs/{orgId}/domain':
        get:
            description: Return the base domain
            tags:
            - domain
            operationId: GetDomain
            parameters:
            - name: orgId
              in: path
              required: true
              description: Organization identification
              schema:
                  type: integer
            - name: clusterid
              in: query
              description: Cluster ID bounded domain name
              schema:
                  type: string
                  default: false
            responses:
                '200':
                    description: GetDomainResponse
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetDomainResponse'
    '/api/v1/orgs/{orgId}/spotguides':
        get:
            security:
                - bearerAuth: []
            tags:
                - spotguides
            summary: List spotguides
            description: List all available spotguides
            operationId: ListSpotguides
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '200':
                    description: Spotguide list
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListSpotguidesResponse'

        post:
            security:
                - bearerAuth: []
            tags:
                - spotguides
            summary: Launch spotguide
            description: Launch a spotguide
            operationId: LaunchSpotguide
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/LaunchSpotguidesRequest'
            responses:
                '202':
                    description: Spotguide launch response

        put:
            security:
                - bearerAuth: []
            tags:
                - spotguides
            summary: Update spotguide repositories
            operationId: UpdateSpotguides
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '202':
                    description: Spotguides update

    '/api/v1/orgs/{orgId}/spotguides/{name}':
        get:
            security:
                - bearerAuth: []
            tags:
                - spotguides
            summary: Get spotguide details
            description: Get details about specific spotguide
            operationId: GetSpotguideDetail
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Spotguide name
                  schema:
                      type: string
                      example: banzaicloud/spotguide-nodejs-mongodb
            responses:
                '200':
                    description: Spotguide details
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/SpotguideDetailsResponse'
                '404':
                    description: Spotguide not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/SpotguideNotFound'

    '/api/v1/orgs/{orgId}/clusters':
        post:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Create cluster
            description: Create a new K8S cluster in the cloud
            operationId: CreateCluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '202':
                    description: Cluster created successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateClusterResponse_202'
                '400':
                    description: Cluster creation failed
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateClusterResponse_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateClusterRequest'

                        examples:
                            AKS:
                                value:
                                    name: "azcluster-pipelineuser-123"
                                    location: "westeurope"
                                    cloud: "azure"
                                    instanceType: "Standard_D2_v2"
                                    properties:
                                        aks:
                                            $ref: '#/components/schemas/CreateAKSProperties'

                            GKE:
                                value:
                                    name: "gkecluster-pipelineuser-123"
                                    location: "us-central1-a"
                                    cloud: "google"
                                    instanceType: "n1-standard-1"
                                    properties:
                                        gke:
                                            $ref: '#/components/schemas/CreateGKEProperties'
        get:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: List clusters
            operationId: ListClusters
            description: Listing all the K8S clusters from the cloud
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '200':
                    description: All cluster listed
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/GetClusterStatusResponse'
                '400':
                    description: Error during listing clusters
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
    '/api/v1/orgs/{orgId}/clusters/{id}':
        get:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Get cluster status
            description: Getting cluster status
            operationId: GetCluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  description: Selected cluster identification (number)
                  required: true
                  schema:
                      type: integer
            responses:
                '200':
                    description: Getting cluster succeeded
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetClusterStatusResponse'
                '400':
                    description: Error during getting cluster details
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Cluster not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

        put:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Update cluster
            description: Updating an existing K8S cluster
            operationId: UpdateCluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  description: Selected cluster identification (number)
                  required: true
                  schema:
                      type: integer
            responses:
                '202':
                    description: Cluster update accepted
                '400':
                    description: Error during updating cluster
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Cluster not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/UpdateClusterRequest'

        delete:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Delete cluster
            description: Deleting a K8S cluster
            operationId: DeleteCluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  description: Selected cluster identification (number)
                  required: true
                  schema:
                      type: integer
                - name: force
                  in: query
                  description: Ignore errors during deletion
                  schema:
                      type: boolean
                      default: false
            responses:
                '202':
                    description: Cluster deleted successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterDelete_200'
                '400':
                    description: Error during deleting cluster
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Cluster not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

        head:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Get cluster status
            operationId: GetClusterStatus
            description: Getting the K8S cluster status
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '200':
                    description: Cluster exists
                '400':
                    description: Error during getting cluster status
                '401':
                    description: Unauthorized
                '404':
                    description: Cluster not found

    '/api/v1/orgs/{orgId}/clusters/{id}/details':
        get:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Get cluster details
            description: Getting cluster details
            operationId: GetClusterDetails
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  description: Selected cluster identification (number)
                  required: true
                  schema:
                      type: integer
            responses:
                '200':
                    description: Getting cluster succeeded
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterDetailsResponse'
                '400':
                    description: Error during getting cluster details
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Cluster not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

    '/api/v1/orgs/{orgId}/clusters/{id}/pods':
        get:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Get pod details
            description: Getting pod details
            operationId: GetPodDetails
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  description: Selected cluster identification (number)
                  required: true
                  schema:
                      type: integer
            responses:
                '200':
                    description: Getting cluster succeeded
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/PodDetailsResponse'
                '400':
                    description: Error during getting cluster details
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Cluster not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

    '/api/v1/orgs/{orgId}/clusters/{id}/posthooks':
        put:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Run posthook functions
            operationId: ClusterPostHooks
            description: Run posthook functions
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Posthooks started"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/ReRunPostHook'


    '/api/v1/orgs/{orgId}/clusters/{id}/config':
        get:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Get a cluster config
            operationId: GetClusterConfig
            description: Getting a K8S cluster config file
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Getting config file succeeded"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterConfig'
                '400':
                    description: "Error during getting config file"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

    '/api/v1/orgs/{orgId}/clusters/{id}/apiendpoint':
        get:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Get API endpoint
            operationId: GetAPIEndpoint
            description: Get API endpoint
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '200':
                    description: "API endpoint showed"
                    content:
                        text/plain:
                            schema:
                                type: string
                                example: "35.195.56.31"
                '400':
                    description: "Error during getting API endpoint"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

    '/api/v1/orgs/{orgId}/clusters/{id}/monitoring':
        post:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Update monitoring
            operationId: UpdateMonitoring
            description: Update monitoring
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Monitoring updated"
                    content:
                        text/plain:
                            schema:
                                type: string
                                example: "OK"

    '/api/v1/orgs/{orgId}/clusters/{id}/endpoints':
        get:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: List service public endpoints
            operationId: ListEndpoints
            description: List service public endpoints
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: releaseName
                  in: query
                  required: false
                  description: Selected deployment release name
                  schema:
                      type: string
            responses:
                '200':
                    description: "Endpoints listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListEndpointsResponse'
                '400':
                    description: "Error during getting endpoints"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}/clusters/{id}/nodes':
        get:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: List cluser nodes
            operationId: ListNodes
            description: List cluser nodes
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Nodes listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListNodesResponse'
                '400':
                    description: "Error during getting endpoints"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'


    '/api/v1/orgs/{orgId}/clusters/{id}/helminit':
        post:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Initialize Helm
            operationId: HelmInit
            description: Initialize helm in the cluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '201':
                    description: "Helm initialized int the cluster"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HelmInitResponse'
                '400':
                    description: "Error during getting endpoints"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/HelmInitRequest'

    '/api/v1/orgs/{orgId}/clusters/{id}/secrets':
        get:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: List secrets which belongs to cluster
            operationId: ListClusterSecrets
            description: List secrets which belongs to cluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: releaseName
                  in: query
                  required: false
                  description: Selected deployment release name
                  schema:
                      type: string
            responses:
                '200':
                    description: "Secrets listed"
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/SecretItem'

                '400':
                    description: "Error during listing secrets"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'
        post:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Install secrets into cluster
            operationId: InstallSecrets
            description: Install secrets into cluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Secrets are installed into cluster"
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/InstallSecretResponse'
                '400':
                    description: "Error during getting endpoints"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/InstallSecretsRequest'

    '/api/v1/orgs/{orgId}/clusters/{id}/secrets/{secretName}':
        post:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Install a particular secret into a cluster with optional remapping
            operationId: InstallSecret
            description: Install a particular secret into a cluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: secretName
                  in: path
                  required: true
                  description: Secret name as it will be seen in the cluster
                  schema:
                      type: string

            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/InstallSecretRequest'

            responses:
                '200':
                    description: "secret is installed into the cluster"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/InstallSecretResponse'
                '400':
                    description: "invalid request"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "secret not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError'
                '409':
                    description: "secret already exists in the cluster"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError'

        patch:
            security:
                - bearerAuth: []
            tags:
                - clusters
            summary: Merge a particular secret with an existing one with optional remapping
            operationId: MergeSecret
            description: Merge a particular secret with an existing one
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: secretName
                  in: path
                  required: true
                  description: Secret name as it will be seen in the cluster
                  schema:
                      type: string

            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/InstallSecretRequest'

            responses:
                '200':
                    description: "secret is installed into the cluster"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/InstallSecretResponse'
                '400':
                    description: "invalid request"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "secret not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError'

    '/api/v1/orgs/{orgId}/clusters/{id}/scanlog':
        get:
            security:
                - bearerAuth: []
            tags:
                - scanlog
            operationId: ListScans
            summary: List scans
            description: List scans
            parameters:
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '200':
                    description: Scan listing
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ScanLogList"

    '/api/v1/orgs/{orgId}/clusters/{id}/scanlog/{releaseName}':
        get:
            security:
                - bearerAuth: []
            tags:
                - scanlog
            operationId: ListScansByRelease
            summary: List scans by release
            description: List scans by release
            parameters:
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: releaseName
                  in: path
                  required: true
                  description: release name identification
                  schema:
                      type: string
            responses:
                '200':
                    description: Scan listing
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/ScanLogList"

    '/api/v1/orgs/{orgId}/clusters/{id}/policies':
        get:
            security:
                - bearerAuth: []
            tags:
                - policies
            operationId: ListPolicies
            summary: List policies
            description: List all saved policy bundles
            parameters:
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: detail
                  in: query
                  schema:
                      type: boolean
                  required: false
                  description: Include policy bundle detail in the form of the full bundle content for each entry
            responses:
                '200':
                    description: Policy listing
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/PolicyBundleList"
        post:
            tags:
                - policies
            operationId: AddPolicy
            summary: Add a new policy
            description: Adds a new policy bundle to the system
            parameters:
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer

            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/PolicyBundle"
            responses:
                200:
                    description: Saved bundle
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/PolicyBundleRecord"
                500:
                    description: Internal Error
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/BaseError_500"

    '/api/v1/orgs/{orgId}/clusters/{id}/policies/{policyId}':
        get:
            tags:
                - policies
            operationId: GetPolicy
            description: Get the policy bundle content
            summary: Get specific policy
            parameters:
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: policyId
                  in: path
                  schema:
                      type: string
                  required: True
                - name: detail
                  in: query
                  schema:
                      type: boolean
                  required: false
                  description: Include policy bundle detail in the form of the full bundle content for each entry
            responses:
                200:
                    description: A list with a single fetched policy bundle record
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/PolicyBundleList"
                500:
                    description: Internal Error
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/BaseError_500"
        put:
            tags:
                - policies
            operationId: UpdatePolicy
            description: Update/replace and existing policy
            summary: Update policy
            parameters:
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: policyId
                  in: path
                  schema:
                      type: string
                  required: True
                - name: active
                  in: query
                  schema:
                      type: boolean
                  required: false
                  description: Mark policy as active
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/PolicyBundleRecord"
            responses:
                200:
                    description: A list with a single updated policy bundle record
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/PolicyBundleList"
                500:
                    description: Internal Error
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/BaseError_500"
        delete:
            tags:
                - policies
            operationId: DeletePolicy
            description: Delete the specified policy
            summary: Delete policy
            parameters:
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: policyId
                  in: path
                  required: true
                  schema:
                      type: string
            responses:
                200:
                    description: Delete success
                404:
                    description: Policy not found to delete
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/BaseError_400"
                500:
                    description: Internal Error
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/BaseError_500"


    '/api/v1/orgs/{orgId}/helm/repos':
        get:
            security:
                - bearerAuth: []
            tags:
                - helm
            summary: List repositories
            operationId: HelmInit
            description: Listing Helm repositories in the cluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Repositories listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HelmReposListResponse'
                '400':
                    description: "Error during getting endpoints"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

        post:
            security:
                - bearerAuth: []
            tags:
                - helm
            summary: Add Repo
            operationId: HelmReposAdd
            description: Add new Helm repository
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '200':
                    description: "resource successfully added."
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HelmRepoListItem'
                '400':
                    description: "Error adding Helm repo"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/HelmReposAddRequest'

    '/api/v1/orgs/{orgId}/helm/repos/{repoName}':
        delete:
            security:
                - bearerAuth: []
            tags:
                - helm
            summary: Delete Repo
            operationId: HelmReposDelete
            description: Delete  Helm repository
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: repoName
                  in: path
                  required: true
                  description: Helm repo name
                  schema:
                      type: string
            responses:
                '200':
                    description: "resource deleted successfully"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HelmReposDeleteResponse'
                '400':
                    description: "error deleting Helm repos"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

        put:
            security:
                - bearerAuth: []
            tags:
                - helm
            summary: Modify Repo
            operationId: HelmReposModify
            description: Modify Helm repository
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: repoName
                  in: path
                  required: true
                  description: Helm repo name
                  schema:
                      type: string
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/HelmReposModifyRequest'
            responses:
                '200':
                    description: "resource modified successfully"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HelmReposUpdateResponse'
                '400':
                    description: "repo modification failed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Resource found"
                    content:
                        application/json:
                            schema:
                                oneOf:
                                    - $ref: '#/components/schemas/ClusterNotFound'
                                    - $ref: '#/components/schemas/RepoNotFound'

    '/api/v1/orgs/{orgId}/helm/repos/{repoName}/update':
        put:
            security:
                - bearerAuth: []
            tags:
                - helm
            summary: Update Repo
            operationId: HelmReposUpdate
            description: Modify Helm repository
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: repoName
                  in: path
                  required: true
                  description: Helm repo name
                  schema:
                      type: string
            responses:
                '200':
                    description: "resource modified successfully"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HelmReposUpdateResponse'
                '400':
                    description: "repo modification failed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Resource found"
                    content:
                        application/json:
                            schema:
                                oneOf:
                                    - $ref: '#/components/schemas/ClusterNotFound'
                                    - $ref: '#/components/schemas/RepoNotFound'

    '/api/v1/orgs/{orgId}/helm/charts/':
        get:
            security:
                - bearerAuth: []
            tags:
                - helm
            summary: Chart List
            operationId: HelmChartList
            description: Get available Helm chart's list
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: name
                  in: query
                  required: false
                  description: Chart Name
                  schema:
                      type: string
                - name: repo
                  in: query
                  required: false
                  description: Repo Name
                  schema:
                      type: string
                - name: version
                  in: query
                  required: false
                  description: Chart version (latest)
                  schema:
                      type: string

            responses:
                '200':
                    description: ""
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HelmChartsListResponse'
                '400':
                    description: "error parsing request"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Resource found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'


    '/api/v1/orgs/{orgId}/helm/chart/{repoName}/{chartName}':
        get:
            security:
                - bearerAuth: []
            tags:
                - helm
            summary: Chart details
            operationId: HelmChartDetails
            description: Get helm chart details
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: repoName
                  in: path
                  required: true
                  description: Chart repository name
                  schema:
                      type: string
                - name: chartName
                  in: path
                  required: true
                  description: Chart Name
                  schema:
                      type: string
                - name: version
                  in: query
                  required: false
                  description: Chart version
                  schema:
                      type: string

            responses:
                '200':
                    description: ""
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HelmChartDetailsResponse'
                '400':
                    description: "error parsing request"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Resource found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ChartNotFound'



    '/api/v1/orgs/{orgId}/clusters/{id}/deployments':
        get:
            security:
                - bearerAuth: []
            tags:
                - deployments
            summary: List deployments
            operationId: ListDeployments
            description: Listing Helm deployments
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: tag
                  in: query
                  description: Deployment tag to filter for
                  schema:
                      type: string
            responses:
                '200':
                    description: "Deployments listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListDeploymentsResponse'
                '400':
                    description: "Error during getting endpoints"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'
        post:
            security:
                - bearerAuth: []
            tags:
                - deployments
            summary: Create a Helm deployment
            operationId: CreateDeployment
            description: Creating a Helm deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateUpdateDeploymentRequest'
            responses:
                '201':
                    description: "Deployment created successfully"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateUpdateDeploymentResponse'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '400':
                    description: "Error during creating deployment"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'
        head:
            security:
                - bearerAuth: []
            tags:
                - deployments
            summary: Get tiller status
            operationId: GetTillerStatus
            description: Checking if tiller ready to accept deployments
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Tiller is available"
                '400':
                    description: "Error during creating deployment"
                '401':
                    description: "Unauthorized"
                '404':
                    description: "Cluster not found"

    '/api/v1/orgs/{orgId}/clusters/{id}/whitelists':
        get:
            security:
                - bearerAuth: []
            tags:
                - whitelist
            summary: List Whitelisted deployments
            operationId: ListWhitelists
            description: List Whitelisted deployments
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '200':
                    description: "List Whitelists"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ReleaseWhiteList'
        post:
            security:
                - bearerAuth: []
            tags:
                - whitelist
            summary: Create Whitelisted deployment
            operationId: CreateWhitelists
            description: Create Whitelisted deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/ReleaseWhiteListItem'
            responses:
                '200':
                    description: "Whitelist created"

    '/api/v1/orgs/{orgId}/clusters/{id}/whitelists/{name}':
        delete:
            security:
                - bearerAuth: []
            tags:
                - whitelist
            summary: Delete Whitelisted deployment
            operationId: DeleteWhitelist
            description: Delete Whitelisted deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Selected whitelist identification
                  schema:
                      type: string
            responses:
                '200':
                    description: "Whitelist deleted"

    '/api/v1/orgs/{orgId}/clusters/{id}/deployments/{name}':
        delete:
            security:
                - bearerAuth: []
            tags:
                - deployments
            summary: Delete deployment
            operationId: DeleteDeployment
            description: Deleting a Helm deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Deployment name
                  schema:
                      type: string
            responses:
                '200':
                    description: "Deployment deleted successfully"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/DeleteDeploymentResponse'
                '400':
                    description: "Error during delete deployment"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

        put:
            security:
                - bearerAuth: []
            tags:
                - deployments
            summary: Update deployment
            operationId: UpdateDeployment
            description: Updating a Helm deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Deployment name
                  schema:
                      type: string
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateUpdateDeploymentRequest'
            responses:
                '201':
                    description: "Deployment updated successfully"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateUpdateDeploymentResponse'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '400':
                    description: "Error during creating deployment"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

        head:
            security:
                - bearerAuth: []
            tags:
                - deployments
            summary: Check deployment status
            operationId: HelmDeploymentStatus
            description: Checking the status of a deployment through the Helm client API
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Deployment name
                  schema:
                      type: string
            responses:
                '200':
                    description: "Deployment status is OK"
                '400':
                    description: "Error during checking deployment status"
                '401':
                    description: "Unauthorized"
                '404':
                    description: "Deployment not found"
        get:
            security:
                - bearerAuth: []
            tags:
                - deployments
            summary: Get deployment details
            operationId: GetDeployment
            description: Retrieves the details of a deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Deployment name
                  schema:
                      type: string
                - name: tag
                  in: query
                  required: false
                  description: Deployment tag
                  schema:
                      type: string
            responses:
                '200':
                    description: "Deployment details"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetDeploymentResponse'
                '400':
                    description: "Bad request"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}/clusters/{id}/deployments/{name}/resources':
        get:
            security:
                - bearerAuth: []
            tags:
                - deployments
            summary: Get deployment K8s resources
            operationId: GetDeploymentResource
            description: Retrieves the K8s resources of a deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Deployment name
                  schema:
                      type: string
                - name: resourceTypes
                  in: query
                  required: false
                  description: K8s reource type
                  schema:
                      type: string
            responses:
                '200':
                    description: "Deployment resources"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GetDeploymentResourcesResponse'
                '400':
                    description: "Bad request"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}/clusters/{id}/deployments/{name}/images':
        get:
            security:
                - bearerAuth: []
            tags:
                - deployments
            summary: Get deployment K8s images
            operationId: GetDeploymentImages
            description: Retrieves the K8s images of a deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Deployment name
                  schema:
                      type: string
            responses:
                '200':
                    description: "Deployment images"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/DeploymentImageList'
                '400':
                    description: "Bad request"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}/clusters/{id}/hpa':
        put:
            security:
                - bearerAuth: []
            tags:
                - hpa
            summary: Create / Update Deployment Scaling
            operationId: UpdateDeploymentAutoscaling
            description: Create / update scaling info for a Helm deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/DeploymentScalingRequest'
            responses:
                '201':
                    description: "Deployment autoscaling updated successfully"
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '400':
                    description: "Error during creating deployment"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

        delete:
            security:
                - bearerAuth: []
            tags:
                - hpa
            summary: Delete Deployment Scaling
            operationId: DeleteDeploymentAutoscaling
            description: Delete scaling info for a Helm deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: scaleTarget
                  in: query
                  required: true
                  description: Deployment or StatefulSet name
                  schema:
                      type: string
            responses:
                '201':
                    description: "Deployment autoscaling updated successfully"
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '400':
                    description: "Error during creating deployment"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '404':
                    description: "Cluster not found"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

        get:
            security:
                - bearerAuth: []
            tags:
                - hpa
            summary: Get Deployment Scaling Info
            operationId: GetDeploymentAutoscaling
            description: Get scaling info for a Helm deployment
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: scaleTarget
                  in: query
                  required: true
                  description: Deployment or StatefulSet name
                  schema:
                      type: string
            responses:
                '200':
                    description: "Deployment autoscaling info"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/DeploymentScalingResponse'
                '400':
                    description: "Bad request"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}/profiles/cluster/{distribution}':
        get:
            security:
                - bearerAuth: []
            tags:
                - profiles
            summary: List cluster profiles
            operationId: ListProfiles
            description: Listing cluster profiles by cloud type
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: distribution
                  in: path
                  required: true
                  description: Distribution type
                  schema:
                      type: string
            responses:
                '200':
                    description: "Profiles listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ProfileListResponse'
                '400':
                    description: "Error during delete deployment"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'

    '/api/v1/orgs/{orgId}/profiles/cluster':
        post:
            security:
                - bearerAuth: []
            tags:
                - profiles
            summary: Add cluster profiles
            operationId: AddProfiles
            description: Add cluster profile
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/AddClusterProfileRequest'
            responses:
                '201':
                    description: "Cluster profile created successfully"
                '400':
                    description: "Error during delete deployment"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'

        put:
            security:
                - bearerAuth: []
            tags:
                - profiles
            summary: Update cluster profiles
            operationId: UpdateProfiles
            description: Update an existing cluster profile
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/AddClusterProfileRequest'
            responses:
                '201':
                    description: "Cluster profile updated successfully"
                '400':
                    description: Error during updating cluster profile
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Cluster profile not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterProfileNotFound'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}/profiles/cluster/{distribution}/{name}':
        delete:
            security:
                - bearerAuth: []
            tags:
                - profiles
            summary: Delete cluster profiles
            operationId: DeleteProfiles
            description: Delete cluster profiles by cloud type and name
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: distribution
                  in: path
                  required: true
                  description: Distribution type
                  schema:
                      type: string
                - name: name
                  in: path
                  required: true
                  description: Cluster profile name
                  schema:
                      type: string
            responses:
                '201':
                    description: "Cluster profile deleted successfully"
                '400':
                    description: Error during deleting cluster profile
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Cluster profile not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterProfileNotFound'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    /api/v1/tokens:
        get:
            security:
                - bearerAuth: []
            tags:
                - auth
            summary: List all API tokens
            operationId: ListTokens
            description: List all API tokens
            responses:
                '200':
                    description: Tokens listed successfully
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/TokenListResponseItem'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'
        post:
            security:
                - bearerAuth: []
            tags:
                - auth
            summary: Create token
            operationId: CreateToken
            description: Create token
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/TokenCreateRequest'
            responses:
                '200':
                    description: Token created successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/TokenCreateResponse'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    /api/v1/tokens/{tokenId}:
        delete:
            security:
                - bearerAuth: []
            tags:
                - auth
            summary: Delete an API token
            operationId: DeleteToken
            description: Delete an API token
            parameters:
                - name: tokenId
                  in: path
                  required: true
                  description: Token identification
                  schema:
                      type: string
                      example: a4358708-c525-4c78-89c2-c1cbe0f3f76c
            responses:
                '204':
                    description: Token deleted successfully
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}/secrets':
        get:
            security:
                - bearerAuth: []
            tags:
                - secrets
            summary: List secrets
            operationId: GetSecrets
            description: Listing secrets
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: type
                  in: query
                  required: false
                  description: Secret's type to filter with
                  schema:
                      type: string
                      enum: [amazon, azure, google, kubernetes, generic, tls, ssh]
                - name: tags
                  in: query
                  required: false
                  description: The selected tag to filter with
                  schema:
                      type: array
                      items:
                          type: string
                      example: [ "release:pipeline-monitoring" ]
                - name: values
                  in: query
                  required: false
                  description: Marks if to present secret values or just the keys
                  schema:
                      type: boolean
            responses:
                '200':
                    description: Secrets listed
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/SecretItem'
                '400':
                    description: Error during listing secrets
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
        post:
            security:
                - bearerAuth: []
            tags:
                - secrets
            summary: Add secrets
            operationId: AddSecrets
            description: Adding secrets
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: validate
                  in: query
                  required: false
                  description: validation is skipped or not
                  schema:
                      type: boolean
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateSecretRequest'
            responses:
                '201':
                    description: Secret saved successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateSecretResponse'
                '400':
                    description: Error during adding secrets
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'
    '/api/v1/allowed/secrets':
        get:
            security:
                - bearerAuth: []
            tags:
                - secrets
            summary: List allowed secret types
            operationId: AllowedSecretsTypes
            description: List allowed secret types and their required keys
            responses:
                '200':
                    description: Allowed types listed
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AllowedSecretTypesResponse'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'

    '/api/v1/allowed/secrets/{type}':
        get:
            security:
                - bearerAuth: []
            tags:
                - secrets
            summary: List required keys
            operationId: AllowedSecretsTypesKeys
            description: List required keys in the given secret type
            parameters:
                - name: type
                  in: path
                  required: true
                  description:  Secret type
                  schema:
                      type: string
            responses:
                '200':
                    description: Required keys listed
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AllowedSecretTypeResponse'
                '400':
                    description: Error during listing secret types
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'

    '/api/v1/orgs/{orgId}/secrets/{secretId}':
        get:
            security:
                - bearerAuth: []
            tags:
                - secrets
            summary: Get secret
            operationId: GetSecret
            description: Get secret
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: secretId
                  in: path
                  required: true
                  description: Secret identification
                  schema:
                      type: string
            responses:
                '200':
                    description: Secret returned successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/SecretItem'
                '400':
                    description: Error during getting secret
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Secret not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/SecretsNotFound'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'
        put:
            security:
                - bearerAuth: []
            tags:
                - secrets
            summary: Update secrets
            operationId: UpdateSecrets
            description: Update secrets
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: secretId
                  in: path
                  required: true
                  description: Secret identification
                  schema:
                      type: string
                - name: validate
                  in: query
                  required: false
                  description: validation is skipped or not
                  schema:
                      type: boolean
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateSecretRequest'
            responses:
                '200':
                    description: Secret updated successfully
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateSecretResponse'
                '400':
                    description: Error during updating secrets
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '409':
                    description: Conflict
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Conflict'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'
        delete:
            security:
                - bearerAuth: []
            tags:
                - secrets
            summary: Delete secrets
            operationId: DeleteSecrets
            description: Deleting secrets
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: secretId
                  in: path
                  required: true
                  description: Secret identification
                  schema:
                      type: string
            responses:
                '204':
                    description: Secret deleted successfully
                '400':
                    description: Error during deleting secrets
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Secrets not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/SecretsNotFound'

    '/api/v1/orgs/{orgId}/secrets/{secretId}/validate':
        get:
            security:
                - bearerAuth: []
            tags:
                - secrets
            summary: Validate secret
            operationId: ValidateSecret
            description: Validate secret
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: secretId
                  in: path
                  required: true
                  description: Secret identification
                  schema:
                      type: string
            responses:
                '200':
                    description: Valid secret

                '400':
                    description: Error during getting secret
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Secret not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/SecretsNotFound'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}':
        get:
            security:
                - bearerAuth: []
            tags:
                - organizations
            summary: Get organization
            operationId: GetOrg
            description: Getting organization
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Organization getting successfully"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/OrganizationListItemResponse'
                '400':
                    description: Error during getting organization
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Organization not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/OrganizationNotFound'

    '/api/v1/orgs':
        get:
            security:
                - bearerAuth: []
            tags:
                - organizations
            summary: List organizations
            operationId: ListOrgs
            description: Listing organizations
            responses:
                '200':
                    description: "Organizations listed successfully"
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/OrganizationListItemResponse'
                '400':
                    description: Error during listing organizations
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
        post:
            security:
                - bearerAuth: []
            tags:
                - organizations
            summary: Create organization
            operationId: CreateOrg
            description: Creating organization
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                name:
                                    type: string
                                    example: "myOrgName"
            responses:
                '200':
                    description: "Organizations created successfully"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/OrganizationCreateResponse'
                '400':
                    description: Error during creating organization
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api':
        get:
            tags:
                - common
            summary: List Pipeline API endpoints
            operationId: ListEndpoints
            description: Listing Pipeline API endpoint
            responses:
                '200':
                    description: "Endpoints listed"
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    type: string
                                example: [
                                    "/api/v1/orgs",
                                    "/api/v1/orgs/:orgid",
                                ]

    '/api/v1/orgs/{orgId}/users':
        get:
            security:
                - bearerAuth: []
            tags:
                - users
            summary: List users
            operationId: ListUsers
            description: Listing users
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Users listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListUserResponse'

    '/api/v1/orgs/{orgId}/users/{userId}':
        get:
            security:
                - bearerAuth: []
            tags:
                - users
            summary: Get user
            operationId: GetUsers
            description: Getting user
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: userId
                  in: path
                  required: true
                  description: User identification
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Getting user succeeded"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/User'

    '/api/v1/orgs/{orgId}/cloudinfo':
        get:
            security:
                - bearerAuth: []
            tags:
                - info
            summary: Get supported cloud types
            operationId: GetSupportedClouds
            description: Get supported cloud types
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '200':
                    description: "Supported clouds listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/SupportedCloudsResponse'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'

    '/api/v1/orgs/{orgId}/cloudinfo/amazon':
        get:
            security:
                - bearerAuth: []
            tags:
                - info
            summary: Get all amazon config
            operationId: GetAmazonConfig
            description: Get all amazon config
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: secretId
                  in: query
                  required: true
                  description: Secret identifier
                  schema:
                      type: string
                - name: fields
                  in: query
                  required: true
                  description: Filter fields
                  schema:
                      type: string
                      enum: ["location", "image", "instanceType"]
                - name: tags
                  in: query
                  required: true
                  description: Tags filter
                  schema:
                      type: string
                - name: location
                  in: query
                  required: true
                  description: Location filter
                  schema:
                      type: string
            responses:
                '200':
                    description: "Amazon config listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AmazonConfigResponse'
                '400':
                    description: Error during listing config
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'

    '/api/v1/orgs/{orgId}/cloudinfo/azure':
        get:
            security:
                - bearerAuth: []
            tags:
                - info
            summary: Get all azure config
            operationId: GetAzureConfig
            description: Get all azure config
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: secretId
                  in: query
                  required: true
                  description: Secret identifier
                  schema:
                      type: string
                - name: fields
                  in: query
                  required: true
                  description: Filter fields
                  schema:
                      type: string
                      enum: ["location", "k8sVersion", "instanceType"]
                - name: location
                  in: query
                  required: true
                  description: Location filter
                  schema:
                      type: string
            responses:
                '200':
                    description: "Azure config listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AzureConfigResponse'
                '400':
                    description: Error during listing config
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'

    '/api/v1/orgs/{orgId}/cloudinfo/google':
        get:
            security:
                - bearerAuth: []
            tags:
                - info
            summary: Get all google config
            operationId: GetGoogleConfig
            description: Get all google config
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: secretId
                  in: query
                  required: true
                  description: Secret identifier
                  schema:
                      type: string
                - name: fields
                  in: query
                  required: true
                  description: Filter fields
                  schema:
                      type: string
                      enum: ["location", "k8sVersion", "instanceType"]
                - name: location
                  in: query
                  required: true
                  description: Location filter
                  schema:
                      type: string
            responses:
                '200':
                    description: "Azure config listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/GoogleConfigResponse'
                '400':
                    description: Error during listing config
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'


    '/api/v1/orgs/{orgId}/azure/resourcegroups':
        get:
            security:
                - bearerAuth: []
            tags:
                - info
            summary: Get all resource groups
            operationId: GetResourceGroup
            description: Get all resource groups
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: secretId
                  in: header
                  required: true
                  description: Secret identifier
                  schema:
                      type: string
            responses:
                '200':
                    description: "Azure resource groups listed"
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    type: string
                                example: [
                                    "resourceGroup1",
                                    "resourceGroup2",
                                ]
                '400':
                    description: Error during listing resource groups
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'

        post:
            security:
                - bearerAuth: []
            tags:
                - info
            summary: Create resource groups
            operationId: CreateResourceGroup
            description: Create resource groups
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateResourceGroup'
            responses:
                '201':
                    description: "Azure resource group created"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ResourceGroupCreated'
                '400':
                    description: Error during listing resource groups
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'

    '/api/v1/orgs/{orgId}/azure/resourcegroups/{name}':
        delete:
            security:
                - bearerAuth: []
            tags:
                - info
            summary: Delete resource group
            operationId: DeleteResourceGroup
            description: Delete resource group
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Resource group name
                  schema:
                      type: integer
                - name: secretId
                  in: header
                  required: true
                  description: Secret identifier
                  schema:
                      type: string
            responses:
                '202':
                    description: "Azure resource group deleted"
                '400':
                    description: Error during listing resource groups
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'

    '/api/v1/orgs/{orgId}/buckets':
        get:
            security:
                - bearerAuth: []
            tags:
                - storage
            summary: List object storage buckets
            operationId: ListObjectStoreBuckets
            description: List object store buckets accessible by the credentials referenced by the given secret. If no credentials provided all managed buckets are returned for all cloud types.
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: secretId
                  in: header
                  required: false
                  description: Secret identification. If not provided only the managed buckets (those created via pipeline) are listed
                  schema:
                      type: string
                - name: cloudType
                  in: query
                  schema:
                      type: string
                      enum: [amazon, google, azure]
                  required: false
                  description: Identifies the cloud provider - mandatory if secretId header is provided
                - name: include
                  in: query
                  schema:
                      type: string
                      enum: [secret]
                  required: false
                  description: Signals whether the secret name is to be returned
                - name: location
                  in: query
                  schema:
                      type: string
                  description: Identifies the cloud region. Required by Amazon only.
            responses:
                '200':
                    description: "Storage buckets listed"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListStorageBucketsResponse'
                '400':
                    description: "Bad request"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'
        post:
            security:
                - bearerAuth: []
            tags:
                - storage
            summary: Creates a new object store bucket with the given params
            operationId: CreateObjectStoreBucket
            description: Creates a new object store bucket on the Cloud provider referenced by the given secret. The credentials for creating the bucket is taken from the provided secret.
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
            responses:
                '202':
                    description: "Storage bucket creation request accepted"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/CreateObjectStoreBucketResponse'
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '400':
                    description: Error while creating storage bucket
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateObjectStoreBucketRequest'

    '/api/v1/orgs/{orgId}/buckets/{name}':
        delete:
            security:
                - bearerAuth: []
            tags:
                - storage
            summary: Deletes the object store bucket with the given name
            operationId: DeleteObjectStoreBucket
            description: Deletes the object store bucket identified by the given name. The credentials for deleting the bucket is taken from the provided secret.
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Bucket identification
                  schema:
                      type: string
                - name: secretId
                  in: header
                  required: true
                  description: Secret identification
                  schema:
                      type: string
                - name: cloudType
                  in: query
                  description: Identifies the cloud provider
                  schema:
                      type: string
                      enum: [amazon, google, azure]
                  required: true
                - name: force
                  in: query
                  description: Is the operation forced
                  required: false
                - name: resourceGroup
                  in: query
                  description: Azure resource group the storage account that holds the bucket (storage container) to be deleted
                  schema:
                      type: string
                - name: storageAccount
                  in: query
                  description: Azure storage account to delete the bucket (storage container) from
                  schema:
                      type: string
            responses:
                '200':
                    description: "Storage bucket deleted successfully"
                '401':
                    description: "Unauthorized"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '400':
                    description: Error while deleting storage bucket
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '404':
                    description: Object store bucket not found
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'
        head:
            security:
                - bearerAuth: []
            tags:
                - storage
            summary: Get object store bucket status
            operationId: GetObjectStoreBucketStatus
            description: Retrieves the status of the object store bucket given its name
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: name
                  in: path
                  required: true
                  description: Bucket identification
                  schema:
                      type: string
                - name: secretId
                  in: header
                  description: Secret identification
                  schema:
                      type: string
                - name: secretName
                  in: header
                  description: Secret identification by name
                  schema:
                      type: string
                - name: cloudType
                  in: query
                  description: Identifies the cloud provider
                  schema:
                      type: string
                      enum: [amazon, google, azure, oracle, alibaba]
                  required: true
                - name: resourceGroup
                  in: query
                  description: Azure resource group to lookup the bucket(storage container) under. Required only on Azure cloud provider.
                  schema:
                      type: string
                - name: storageAccount
                  in: query
                  description: Azure storage account to lookup the bucket(storage container) under. Required only on Azure cloud provider.
                  schema:
                      type: string
                - name: location
                  in: query
                  description: The region to lookup the bucket under. Required on Amazon, Oracle and Alibaba cloud providers.
                  schema:
                      type: string
            responses:
                '200':
                    description: "Object store buckets exists"
                '401':
                    description: "Unauthorized"
                '400':
                    description: Error while checking object store bucket status
                '404':
                    description: Object store bucket not found
                '500':
                    description: Internal server error
        get:
            security:
            - bearerAuth: []
            tags:
            - storage
            summary: Get object store bucket details
            operationId: GetBucket
            description: Retrieves the details of the object store bucket given its name
            parameters:
            - name: orgId
              in: path
              required: true
              description: Organization identification
              schema:
                  type: integer
            - name: name
              in: path
              required: true
              description: Bucket identification
              schema:
                  type: string
            - name: secretId
              in: header
              description: Secret identification
              schema:
                  type: string
            - name: secretName
              in: header
              description: Secret identification by name
              schema:
                  type: string
            - name: cloudType
              in: query
              description: Identifies the cloud provider
              schema:
                  type: string
                  enum: [amazon, google, azure, oracle, alibaba]
              required: true
            - name: resourceGroup
              in: query
              description: Azure resource group to lookup the bucket(storage container) under. Required only on Azure cloud provider.
              schema:
                  type: string
            - name: storageAccount
              in: query
              description: Azure storage account to lookup the bucket(storage container) under. Required only on Azure cloud provider.
              schema:
                  type: string
            - name: location
              in: query
              description: The region to lookup the bucket under. Required on Amazon, Oracle and Alibaba cloud providers.
              schema:
                  type: string
            responses:
                '200':
                    description: Object store bucket details
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BucketInfo'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '400':
                    description: Error while checking object store bucket status
                '404':
                    description: Object store bucket not found
                '500':
                    description: Internal server error


    '/api/v1/orgs/{orgId}/clusters/{id}/images':
        get:
            security:
                - bearerAuth: []
            tags:
                - images
            summary: List Images used in cluster
            operationId: ListImages
            description: List Images used in cluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
            responses:
                '200':
                    description: "List Images"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterImageList'
                '400':
                    description: Error during getting cluster details
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Cluster not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

    '/api/v1/orgs/{orgId}/clusters/{id}/images/{imageDigest}/deployments':
        get:
            security:
                - bearerAuth: []
            tags:
                - images
            summary: List Deployments by Image
            operationId: ListDeploymentsByImage
            description: List Deployments by Image
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: imageDigest
                  in: path
                  required: true
                  description: Image digest
                  schema:
                      type: string
            responses:
                '200':
                    description: "List Images"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ListDeploymentsResponse'
                '400':
                    description: Error during getting cluster details
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_400'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '404':
                    description: Cluster not found
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ClusterNotFound'

    '/api/v1/orgs/{orgId}/clusters/{id}/imagescan':
        post:
            security:
                - bearerAuth: []
            tags:
                - imagescan
            summary: Scan Images used in cluster
            operationId: ScanImages
            description: Scan Images used in cluster
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                    type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                    type: integer
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/ClusterImageList'
            responses:
                '200':
                    description: "Scan Images initiated"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AnchoreImageList'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}/clusters/{id}/imagescan/{imageDigest}':
        get:
            security:
                - bearerAuth: []
            tags:
                - imagescan
            summary: Get Image scan results
            operationId: GetScanResult
            description: Get Image scan result
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: imageDigest
                  in: path
                  required: true
                  description: Image digest
                  schema:
                      type: string
            responses:
                '200':
                    description: "Image scan results"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AnchoreImage'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}/clusters/{id}/imagescan/{imageDigest}/vuln':
        get:
            security:
                - bearerAuth: []
            tags:
                - imagescan
            summary: Get vulnerabilities
            operationId: GetImageVulnerabilities
            description: Get vulnerabilities
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: id
                  in: path
                  required: true
                  description: Selected cluster identification (number)
                  schema:
                      type: integer
                - name: imageDigest
                  in: path
                  required: true
                  description: Image digest
                  schema:
                      type: string
            responses:
                '200':
                    description: "Image Vulnaribility"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/VulnerabilityResponse'
                '401':
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Unauthorized'
                '500':
                    description: Internal server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BaseError_500'

    '/api/v1/orgs/{orgId}/google/projects':
        get:
            security:
                - bearerAuth: []
            tags:
                - projects
            summary: Retrieves projects visible for the user identified by the secret id
            operationId: GetProjects
            description: Retrieves projects visible by the user represented by the secretid header from the google cloud
            parameters:
                - name: orgId
                  in: path
                  required: true
                  description: Organization identification
                  schema:
                      type: integer
                - name: secretId
                  in: header
                  required: true
                  description: Secret identification.
                  schema:
                      type: string
            responses:
              '200':
                  description: "List of projects visible for the user"
                  content:
                      application/json:
                          schema:
                              $ref: '#/components/schemas/ListProjectsResponse'
              '401':
                  description: Unauthorized
                  content:
                      application/json:
                          schema:
                              $ref: '#/components/schemas/Unauthorized'
              '500':
                  description: Internal server error
                  content:
                      application/json:
                          schema:
                              $ref: '#/components/schemas/BaseError_500'

components:
    securitySchemes:
        bearerAuth:
            type: http
            scheme: bearer
            bearerFormat: JWT

    schemas:
        SpotguideDetailsResponse:
            type: object
            properties:
                name:
                    type: string
                    example: "banzaicloud/spotguide-nodejs-mongodb"
                displayName:
                    type: string
                    example: "The spotguide for NodeJS and MongoDB"
                createdAt:
                    type: string
                    example: "2018-06-11T14:28:13Z"
                updatedAt:
                    type: string
                    example: "2018-06-11T14:28:24Z"
                icon:
                    type: string
                    example: "data:image/svg+xml;base64,PHN2ZyB4b..."
                readme:
                    type: string
                    example: "# Spotguide for Node.js with MongoDB database"
                version:
                    type: string
                    example: "v0.0.1"
                tags:
                    type: array
                    items:
                        type: string
                resources:
                    $ref: '#/components/schemas/RequestedResources'
                questions:
                    type: array
                    items:
                        oneOf:
                            - $ref: '#/components/schemas/SpotguideOptionsMysqlDatabaseName'
                            - $ref: '#/components/schemas/SpotguideOptionsMysqlDatabaseSize'
                            - $ref: '#/components/schemas/SpotguideOptionsMysqlVersion'
                            - $ref: '#/components/schemas/SpotguideOptionsMonitor'

        LaunchSpotguidesRequest:
            type: object
            required:
                - spotguideName
                - repoOrganization
                - repoName
            properties:
                repoOrganization:
                    type: string
                    example: "banzaicloud"
                repoName:
                    type: string
                    example: "spotguide-nodejs-mongodb-test"
                spotguideName:
                    type: string
                    example: "banzaicloud/spotguide-nodejs-mongodb"
                spotguideVersion:
                    type: string
                    example: "v0.3.2"
                cluster:
                    $ref: '#/components/schemas/CreateClusterRequest'
                secrets:
                    type: array
                    items:
                        $ref: '#/components/schemas/CreateSecretRequest'
                values:
                    type: object

        SpotguideOptionsMysqlDatabaseName:
            type: object
            properties:
                name:
                    type: string
                    example: mysqlDatabaseName
                type:
                    type: string
                    example: string
                info:
                    type: string
                    example: Your mysql database name
                default:
                    type: string
                    example: "your-mysql-database1"
                readonly:
                    type: boolean
                    example: false
                enabled:
                    type: boolean
                    example: true
                key:
                    type: string
                    example: mysql.database.name

        SpotguideOptionsMysqlDatabaseSize:
            type: object
            properties:
                name:
                    type: string
                    example: mysqlDatabaseSize
                type:
                    type: string
                    example: string
                info:
                    type: string
                    example: Your mysql database size in GB
                default:
                    type: integer
                    example: "1"
                readonly:
                    type: boolean
                    example: false
                enabled:
                    type: boolean
                    example: true
                key:
                    type: string
                    example: mysql.database.size

        SpotguideOptionsMysqlVersion:
            type: object
            properties:
                name:
                    type: string
                    example: mysql_version
                type:
                    type: string
                    example: "string"
                info:
                    type: string
                    example: Mysql database version
                default:
                    type: string
                    enum: [ "5.6", "5.7" ]
                    example: "5.6"
                readonly:
                    type: boolean
                    example: false
                key:
                    type: string
                    example: mysql.version

        SpotguideOptionsMonitor:
            type: object
            properties:
                name:
                    type: string
                    example: monitor
                type:
                    type: boolean
                    example: true
                info:
                    type: string
                    example: Mysql monitoring
                default:
                    type: boolean
                    example: true
                readonly:
                    type: boolean
                    example: false
                key:
                    type: string
                    example: monitor.enabled

        SpotguideNotFound:
            type: object
            properties:
                code:
                    type: integer
                    example: 404
                message:
                    type: string
                    example: spotguide not found
                error:
                    type: string
                    example: spotguide not found

        ListSpotguidesResponse:
            type: array
            items:
                oneOf:
                    - $ref: '#/components/schemas/SpotguideDetailsResponse'

        GetDomainResponse:
            description: GetDomainResponse Api object to be mapped to Get domain request
            type: object
            properties:
                domainName:
                    type: string
                    x-go-name: DomainName
            x-go-package: github.com/banzaicloud/pipeline/internal/domain

        RequestedResources:
            type: object
            properties:
                sumCpu:
                    type: integer
                    example: 8
                    description: Total CPU requested for the cluster
                sumMem:
                    type: integer
                    example: 32
                    description: Total memory requested for the cluster (GB)
                filters:
                    type: array
                    items:
                        type: string
                sameSize:
                    type: boolean
                    example: true
                    description: If true, recommended instance types will have a similar size
                onDemandPct:
                    type: integer
                    example: 10
                    description: Percentage of regular (on-demand) nodes in the recommended cluster
                minNodes:
                    type: integer
                    example: 1
                    description: Minimum number of nodes in the recommended cluster
                maxNodes:
                    type: integer
                    example: 3
                    description: Maximum number of nodes in the recommended cluster

        CreateClusterRequest:
            type: object
            required:
                - name
                - location
                - cloud
                - properties
            properties:
                name:
                    type: string
                    example: "gkecluster-pipelineuser-123"
                location:
                    type: string
                    example: "us-central1-a"
                cloud:
                    type: string
                    example: "google"
                secretId:
                    type: string
                    example: "62bc3c75-91fb-4670-bad4-24b401a9deac"
                secretName:
                    type: string
                    example: "my-aws-secret"
                postHooks:
                    type: object
                    oneOf:
                        - $ref: '#/components/schemas/LoggingPostHook'
                        - $ref: '#/components/schemas/BasePostHook'
                    example:
                        InstallLogging:
                            bucketName: "mybucketname"
                            region: "region"
                            secretId: "62bc3c75-91fb-4670-bad4-24b401a9deac"

                profileName:
                    type: string
                properties:
                    type: object
                    oneOf:
                        - $ref: '#/components/schemas/CreateAKSProperties'
                        - $ref: '#/components/schemas/CreateGKEProperties'
                        - $ref: '#/components/schemas/CreateEKSProperties'
                        - $ref: '#/components/schemas/CreateUpdateOKEProperties'
                        - $ref: '#/components/schemas/CreateAKCSProperties'
                    example:
                        gke:
                            master:
                                version: "1.8.7-gke.1"
                            nodePools:
                                pool1:
                                    count: 1
                                    instanceType: "n1-standard-2"
                            nodeVersion: "1.8.7-gke.1"

        NodePoolsAmazon:
            type: object
            required:
                - instanceType
                - spotPrice
                - minCount
                - maxCount
            properties:
                instanceType:
                    type: string
                    example: "m4.xlarge"
                spotPrice:
                    type: string
                    example: "0.2"
                autoscaling:
                    type: boolean
                    example: true
                count:
                    type: integer
                    example: 1
                minCount:
                    type: integer
                    example: 1
                maxCount:
                    type: integer
                    example: 2
                image:
                    type: string
                    example: "ami-06d1667f"

        CreateEKSProperties:
            type: object
            required:
                - eks
            properties:
                eks:
                    type: object
                    required:
                        - nodePools
                    properties:
                        version:
                            type: string
                            example: "1.10"
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsAmazon'

        CreateAKCSProperties:
            type: object
            required:
                - akcs
            properties:
                akcs:
                    type: object
                    required:
                        - regionId
                        - zoneId
                        - nodePools
                    properties:
                        regionId:
                            type: string
                            example: ""
                        zoneId:
                            type: string
                            example: ""
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsAKCS'

        NodePoolsAKCS:
            type: object
            required:
                - count
                - instanceType
            properties:
                count:
                    type: integer
                    example: 1
                instanceType:
                    type: string
                    example: ""
                systemDiskSize:
                    type: integer
                    example: 8
                systemDiskCategory:
                    type: string
                    example: cloud

        CreateAKSProperties:
            type: object
            required:
                - aks
            properties:
                aks:
                    type: object
                    required:
                        - kubernetesVersion
                        - resourceGroup
                        - nodePools
                    properties:
                        resourceGroup:
                            type: string
                            example: "myRg"
                        kubernetesVersion:
                            type: string
                            example: "1.8.2"
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsAzure'

        NodePoolsAzure:
            type: object
            required:
                - count
                - instanceType
            properties:
                autoscaling:
                    type: boolean
                    example: true
                count:
                    type: integer
                    example: 1
                minCount:
                    type: integer
                    example: 1
                maxCount:
                    type: integer
                    example: 2
                instanceType:
                    type: string
                    example: "Standard_B2ms"

        CreateGKEProperties:
            type: object
            required:
                - gke
            properties:
                gke:
                    type: object
                    required:
                        - nodePools
                    properties:
                        projectId:
                            type: string
                        master:
                            type: object
                            properties:
                                version:
                                    type: string
                                    example: "1.8.7-gke.1"
                        nodeVersion:
                            type: string
                            example: "1.8.7-gke.1"
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsGoogle'

        NodePoolsGoogle:
            type: object
            required:
                - count
                - instanceType
            properties:
                autoscaling:
                    type: boolean
                    example: true
                count:
                    type: integer
                    example: 1
                minCount:
                    type: integer
                    example: 1
                maxCount:
                    type: integer
                    example: 2
                instanceType:
                    type: string
                    example: "n1-standard-2"

        CreateUpdateOKEProperties:
            type: object
            required:
                - oke
            properties:
                oke:
                    type: object
                    required:
                        - version
                        - nodePools
                    properties:
                        version:
                            type: string
                            example: "v1.10.3"
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsOracle'

        NodePoolsOracle:
            type: object
            properties:
                version:
                    type: string
                    example: "v1.10.3"
                count:
                    type: integer
                    example: 1
                image:
                    type: string
                    example: "Oracle-Linux-7.5"
                shape:
                    type: string
                    example: "VM.Standard1.1"
                labels:
                    additionalProperties:
                        $ref: '#/components/schemas/LabelsOracle'

        LabelsOracle:
            type: string
            example: "labelValue"


        CreateClusterResponse_202:
            type: object
            properties:
                name:
                    type: string
                    example: "gkecluster-pipelineuser-123"
                id:
                    type: integer
                    example: 1

        CreateClusterResponse_400:
            type: object
            properties:
                code:
                    type: integer
                    example: 400
                message:
                    type: string
                    example: Invalid version
                error:
                    type: string
                    example: Invalid version

        BaseError:
            type: object
            properties:
                code:
                    type: integer
                    example: 400
                message:
                    type: string
                error:
                    type: string

        BaseError_400:
            type: object
            properties:
                code:
                    type: integer
                    example: 400
                message:
                    type: string
                    example: "Error during process"
                error:
                    type: string
                    example: "Error during process"

        BaseError_500:
            type: object
            properties:
                code:
                    type: integer
                    example: 500
                message:
                    type: string
                    example: "Error during process"
                error:
                    type: string
                    example: "Error during process"

        ClusterNotFound:
            type: object
            properties:
                code:
                    type: integer
                    example: 404
                message:
                    type: string
                    example: "Cluster not found"
                error:
                    type: string
                    example: "record not found"

        RepoNotFound:
            type: object
            properties:
                code:
                    type: integer
                    example: 404
                message:
                    type: string
                    example: "repo not found"
                error:
                    type: string
                    example: "repo not found"

        ClusterConfig:
            type: object
            properties:
                status:
                    type: integer
                    example: 200
                data:
                    type: string
                    example: "apiVersion: v1\nclusters...."

        ClusterProfileNotFound:
            type: object
            properties:
                code:
                    type: integer
                    example: 404
                message:
                    type: string
                    example: "Profile not found"
                error:
                    type: string
                    example: "record not found"

        ChartNotFound:
            type: object
            properties:
                code:
                    type: integer
                    example: 404
                message:
                    type: string
                    example: "Chart Not Found!"
                error:
                    type: string
                    example: "Chart Not Found!"


        UpdateClusterRequest:
            type: object
            required:
                - cloud
                - properties
            properties:
                cloud:
                    type: string
                    example: google
                properties:
                    type: object
                    oneOf:
                        - $ref: '#/components/schemas/UpdateAzureProperties'
                        - $ref: '#/components/schemas/UpdateGoogleProperties'
                        - $ref: '#/components/schemas/UpdateEksProperties'
                        - $ref: '#/components/schemas/CreateUpdateOKEProperties'
                        - $ref: '#/components/schemas/UpdateAKCSProperties'
                    example:
                        google:
                            master:
                                version: "1.10"
                            nodePools:
                                pool1:
                                    count: 2
                                    instanceType: "n1-standard-2"

        UpdateEksProperties:
            type: object
            required:
                - eks
            properties:
                eks:
                    type: object
                    required:
                        - nodePools
                    properties:
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/UpdateNodePoolsEks'

        UpdateNodePoolsEks:
            type: object
            properties:
                instanceType:
                    type: string
                    example: "m4.xlarge"
                spotPrice:
                    type: string
                    example: "0.2"
                autoscaling:
                    type: boolean
                    example: true
                count:
                    type: integer
                    example: 2
                minCount:
                    type: integer
                    example: 1
                maxCount:
                    type: integer
                    example: 2
                image:
                    type: string
                    example: "ami-4d485ca7"

        UpdateAKCSProperties:
            type: object
            required:
                - akcs
            properties:
                akcs:
                    type: object
                    required:
                        - nodePools
                    properties:
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsAKCS'

        UpdateAzureProperties:
            type: object
            required:
                - azure
            properties:
                azure:
                    type: object
                    properties:
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/UpdateNodePoolsAzure'

        UpdateNodePoolsAzure:
            type: object
            required:
                - count
            properties:
                autoscaling:
                    type: boolean
                    example: true
                count:
                    type: integer
                    example: 1
                minCount:
                    type: integer
                    example: 1
                maxCount:
                    type: integer
                    example: 2

        UpdateGoogleProperties:
            type: object
            properties:
                master:
                    type: object
                    properties:
                        version:
                            type: string
                nodeVersion:
                    type: string
                    example: "1.9"
                nodePools:
                    type: object
                    additionalProperties:
                        $ref: '#/components/schemas/UpdateNodePoolsGoogle'

        UpdateNodePoolsGoogle:
            type: object
            required:
                - count
            properties:
                autoscaling:
                    type: boolean
                    example: true
                count:
                    type: integer
                    example: 2
                minCount:
                    type: integer
                    example: 1
                maxCount:
                    type: integer
                    example: 2
                instanceType:
                    type: string
                    example: "n1-standard-2"

        ClusterDelete_200:
            type: object
            properties:
                status:
                    type: integer
                    example: 202
                name:
                    type: string
                    example: "gkecluster-pipelineuser-123"
                id:
                    type: integer
                    example: 1

        Unauthorized:
            type: object
            properties:
                code:
                    type: integer
                    example: 401
                message:
                    type: string
                    example: "Invalid token"
                error:
                    type: string
                    example: "token contains an invalid number of segments"

        Conflict:
            type: object
            properties:
                code:
                    type: integer
                    example: 409
                message:
                    type: string
                    example: "Secret with this name already exists"
                error:
                    type: string
                    example: "check-and-set parameter did not match the current version"

        ListEndpointsResponse:
            type: object
            properties:
                endpoints:
                    type: array
                    items:
                        $ref: '#/components/schemas/EndpointItem'


        EndpointItem:
            type: object
            properties:
                name:
                    type: string
                    example: "pipeline-traefik"
                host:
                    type: string
                    example: "11.11.11.111"
                urls:
                    type: array
                    items:
                        $ref: '#/components/schemas/URLItem'
                    example:


        URLItem:
            type: object
            properties:
                servicename:
                    type: string
                    example: "serviceName"
                url:
                    type: string
                    example: "url"


        ListNodesResponse:
            type: object
            properties:
                metadata:
                    type: object
                    properties:
                        selfLink:
                            type: string
                            example: "/api/v1/nodes"
                        resourceVersion:
                            type: string
                            example: "30123"

                items:
                    type: array
                    items:
                        $ref: '#/components/schemas/NodeItem'

        NodeItem:
            type: object
            properties:
                metadata:
                    type: object
                    properties:
                        name:
                            type: string
                            example: "gke-gkecluster-feri-706-pool1-496eccb3-l25k"
                        selfLink:
                            type: string
                            example: "/api/v1/nodes/gke-gkecluster-feri-706-pool1-496eccb3-l25k"
                        uid:
                            type: string
                            example: "f214d7fb-41ae-11e8-a4ea-42010a8001da"
                        resourceVersion:
                            type: string
                            example: "30119"
                        creationTimestamp:
                            type: string
                            example: "2018-04-16T19:47:07Z"
                        labels:
                            type: object
                            properties:
                                beta.kubernetes.io/arch:
                                    type: string
                                    example: "amd64"
                                beta.kubernetes.io/fluentd-ds-ready:
                                    type: string
                                    example: "true"
                                beta.kubernetes.io/instance-type:
                                    type: string
                                    example: "n1-standard-2"
                                beta.kubernetes.io/os:
                                    type: string
                                    example: "linux"
                                cloud.google.com/gke-nodepool:
                                    type: string
                                    example: "pool1"
                                failure-domain.beta.kubernetes.io/region:
                                    type: string
                                    example: "us-central1"
                                failure-domain.beta.kubernetes.io/zone:
                                    type: string
                                    example: "us-central1-a"
                                kubernetes.io/hostname:
                                    type: string
                                    example: "gke-gkecluster-feri-706-pool1-496eccb3-l25k"
                        annotations:
                            type: object
                            properties:
                                node.alpha.kubernetes.io/ttl:
                                    type: string
                                    example: "0"
                                volumes.kubernetes.io/controller-managed-attach-detach:
                                    type: string
                                    example: "true"
                spec:
                    type: object
                    properties:
                        podCIDR:
                            type: string
                            example: "10.48.0.0/24"
                        externalID:
                            type: string
                            example: "5935724476937880453"
                        providerID:
                            type: string
                            example: "gce://banzaitest/us-central1-a/gke-gkecluster-706-pool1-496eccb3-l25k"
                status:
                    type: object
                    properties:
                        capacity:
                            type: object
                            properties:
                                cpu:
                                    type: string
                                    example: "2"
                                memory:
                                    type: string
                                    example: "7664776Ki"
                                pods:
                                    type: string
                                    example: "110"
                        allocatable:
                            type: object
                            properties:
                                cpu:
                                    type: string
                                    example: "1930m"
                                memory:
                                    type: string
                                    example: "5784712Ki"
                                pods:
                                    type: string
                                    example: "110"
                        conditions:
                            type: array
                            items:
                                type: object
                                properties:
                                    type:
                                        type: string
                                        example: "KernelDeadlock"
                                    status:
                                        type: string
                                        example: "False"
                                    lastHeartbeatTime:
                                        type: string
                                        example: "2018-04-17T09:02:45Z"
                                    lastTransitionTime:
                                        type: string
                                        example: "2018-04-16T19:46:26Z"
                                    reason:
                                        type: string
                                        example: "KernelHasNoDeadlock"
                                    message:
                                        type: string
                                        example: "kernel has no deadlock"
                        addresses:
                            type: array
                            items:
                                type: object
                                properties:
                                    type:
                                        type: string
                                        example: "InternalIP"
                                    address:
                                        type: string
                                        example: "10.128.0.2"

                        daemonEndpoints:
                            type: object
                            properties:
                                kubeletEndpoint:
                                    properties:
                                        Port:
                                            type: integer
                                            example: 10250
                        nodeInfo:
                            type: object
                            properties:
                                machineID:
                                    type: string
                                    example: "10d8adda771410ca912a387cf7e5cb06"
                                systemUUID:
                                    type: string
                                    example: "10D8ADDA-7714-10CA-912A-387CF7E5CB06"
                                bootID:
                                    type: string
                                    example: "decb64ff-e662-410a-b862-04cb490b4772"
                                kernelVersion:
                                    type: string
                                    example: "4.4.111+"
                                osImage:
                                    type: string
                                    example: "Container-Optimized OS from Google"
                                containerRuntimeVersion:
                                    type: string
                                    example: "docker://17.3.2"
                                kubeletVersion:
                                    type: string
                                    example: "v1.10"
                                kubeProxyVersion:
                                    type: string
                                    example: "v1.10"
                                operatingSystem:
                                    type: string
                                    example: "linux"
                                architecture:
                                    type: string
                                    example: "amd64"
                        images:
                            type: array
                            items:
                                type: object
                                properties:
                                    name:
                                        type: array
                                        items:
                                            type: string
                                        example: ["asia.gcr.io/google_containers/node-problem-detector@sha256:f95cab985c26b2f46e9bd43283e0bfa88860c14e0fb0649266babe8b65e", "eu.gcr.io/google_containers/node-problem-detector@sha256:f95cab985c26b2f46e9bd43283e0bfa88860c14e0fb0649266babe"]
                                    sizeBytes:
                                        type: integer
                                        example: 286572743

        ListDeploymentsResponse:
            type: array
            items:
                type: object
                properties:
                    releaseName:
                        type: string
                        example: "pipeline"
                    chart:
                        type: string
                        example: "pipeline-cluster-ingress-0.0.1"
                    chartName:
                        type: string
                        example: "pipeline-cluster-ingress"
                    chartVersion:
                        type: string
                        example: "0.0.1"
                    version:
                        type: integer
                        example: 1
                    updatedAt:
                        type: string
                        example: "2018-07-03T14:23:19+02:00"
                    status:
                        type: string
                        example: "DEPLOYED"
                    namespace:
                        type: string
                        example: "default"
                    createdAt:
                        type: string
                        example: "2018-07-03T14:23:19+02:00"
                    supported:
                        type: boolean
                        example: true

        CreateUpdateDeploymentRequest:
            type: object
            required:
                - name
            properties:
                name:
                    type: string
                    example: "banzaicloud-stable/drone"
                version:
                    type: string
                    example: "0.1.0"
                    description: "Version of the deployment. If not specified, the latest version is used."
                package:
                    type: string
                    format: byte
                    description: "The chart content packaged by `helm package`. If specified chart version is ignored."
                    example: "U3dhZ2dlciByb2Nrcw=="
                namespace:
                    type: string
                    example: "default"
                releaseName:
                    type: string
                    example: "singed-bee"
                dryRun:
                    type: boolean
                    example: false
                odPcts:
                    type: object
                    description: "Map of resources in the template where replicas should have a minimum on-demand percentage. Format: <kind.resourceName: min-percentage>"
                    example: { "deployment.my-deployment": 40 }
                reuseValues:
                    type: boolean
                    example: "true"
                values:
                    type: object
                    description: current values of the deployment
                    example: { "ingress": { "enabled": "true" } }


        CreateUpdateDeploymentResponse:
            type: object
            properties:
                releaseName:
                    type: string
                    example: "vigilant-mandrill"
                notes:
                    type: string
                    format: base64
                    description: deployment notes in base64 encoded format

        DeleteDeploymentResponse:
            type: object
            properties:
                status:
                    type: integer
                    example: 200
                message:
                    type: string
                    example: "Deployment deleted!"
                name:
                    type: string
                    example: "vigilant-mandrill"

        GetDeploymentResourcesResponse:
            type: array
            items:
                type: object
                properties:
                    name:
                        example: bumptious-dragon-zeppelin
                        type: string
                    kind:
                        example: Deployment
                        type: string

        GetDeploymentResponse:
            type: object
            properties:
                releaseName:
                    type: string
                    example: "vigilant-mandrill"
                chart:
                    type: string
                    example: "mysql-0.7.0"
                chartName:
                    type: string
                    example: "mysql"
                chartVersion:
                    type: string
                    example: "0.7.0"
                namespace:
                    type: string
                    example: "default"
                version:
                    type: integer
                    example: 1
                updatedAt:
                    type: string
                    example: "2018-07-03T14:23:19+02:00"
                status:
                    type: string
                    example: "DEPLOYED"
                createdAt:
                    type: string
                    example: "2018-07-03T14:23:19+02:00"
                notes:
                    type: string
                    format: base64
                    description: deployment notes in base64 encoded format
                values:
                    type: object
                    additionalProperties: true
                    description: current values of the deployment
                    example: { "metrics": { "enabled": "true" } }

        HelmInitResponse:
            type: object
            properties:
                status:
                    type: integer
                    example: 201
                message:
                    type: string
                    example: "helm initialising"

        HelmInitRequest:
            type: object
            required:
                - namespace
                - service_account
            properties:
                kube_context:
                    type: string
                namespace:
                    type: string
                upgrade:
                    type: boolean
                service_account:
                    type: string
                canary_image:
                    type: boolean
                tiller_image:
                    type: string
                history_max:
                    type: integer
            example:
                namespace: "kube-system"
                service_account: "tiller"
                tiller_image: "gcr.io/kubernetes-helm/tiller:v2.7.2"

        HelmReposListResponse:
            type: array
            items:
                $ref: '#/components/schemas/HelmRepoListItem'

        HelmRepoListItem:
            type: object
            properties:
                name:
                    type: string
                    example: "stable"
                cache:
                    type: string
                    example: "statestore/<cluster_name>/helm/repository/cache/stabl-index.yaml"
                url:
                    type: string
                    example: "https://kubernetes-charts.storage.googleapis.com"
                certFile:
                    type: string
                    example: ""
                keyFile:
                    type: string
                    example: ""
                caFile:
                    type: string
                    example: ""

        HelmReposModifyRequest:
            type: object
            properties:
                name:
                    type: string
                url:
                    type: string
                certFile:
                    type: string
                keyFile:
                    type: string
                caFile:
                    type: string
            example:
                url: "https://kubernetes-charts.storage.googleapis.com"

        HelmReposAddRequest:
            type: object
            required:
                - name
                - url
            properties:
                name:
                    type: string
                url:
                    type: string
                certFile:
                    type: string
                keyFile:
                    type: string
                caFile:
                    type: string
            example:
                name: "stable"
                url: "https://kubernetes-charts.storage.googleapis.com"

        HelmReposDeleteResponse:
            type: object
            properties:
                status:
                    type: integer
                    example: 200
                message:
                    type: string
                    example: "resource deleted successfully"
                name:
                    type: string
                    example: "stable"

        HelmReposUpdateResponse:
            type: object
            properties:
                status:
                    type: integer
                    example: 200
                message:
                    type: string
                    example: "resource modified successfully"
                name:
                    type: string
                    example: "stable"

        HelmChartsListResponse:
            type: array
            items:
                type: object
                properties:
                    name:
                        type: string
                        example: "stable"
                    charts:
                        type: array
                        items:
                            type: array

                            items:
                                type: object
                                properties:
                                    name:
                                        type: string
                                        example: "nginx-ingress"
                                    home:
                                        type: string
                                        example: "https://github.com/kubernetes/ingress-nginx"
                                    sources:
                                        type: array
                                        items:
                                            type: string
                                        example: ["https://github.com/kubernetes/ingress-nginx"]
                                    version:
                                        type: string
                                        example: "0.13.1"
                                    description:
                                        type: string
                                        example: "An nginx Ingress controller that uses ConfigMap to store the nginx configuration."
                                    keywords:
                                        type: array
                                        items:
                                            type: string
                                        example: ["ingress, nginx"]
                                    maintainers:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                name:
                                                    type: string
                                                    example: "jackzampolin"
                                                email:
                                                    type: string
                                                    example: "jack.zampolin@gmail.com"
                                    engine:
                                        type: string
                                        example: "gotpl"

                                    icon:
                                        type: string
                                        example: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Nginx_logo.svg/500px-Nginx_logo.svg.png"
                                    appVersion:
                                        type: string
                                        example: "0.12.0"
                                    apiVersion:
                                        type: string
                                        example: "v1"
                                    deprecated:
                                        type: boolean
                                        example: flase
                                    urls:
                                        type: array
                                        items:
                                            type: string
                                        example: ["https://kubernetes-charts.storage.googleapis.com/nginx-ingress-0.13.1.tgz"]
                                    created:
                                        type: string
                                        example: "2018-04-11T18:11:24.761440762Z"
                                    digest:
                                        type: string
                                        example: "cf66d1666019b3e1647ba4dbc06a66ee7db1184629ae3669e11a9f72208eb7aa"

        HelmChartDetailsResponse:
            properties:
                name:
                    type: string
                    example: "vault"
                repo:
                    type: string
                    example: "banzaicloud-stable"
                versions:
                    type: array
                    items:
                        type: object
                        properties:
                            chart:
                                type: object
                                properties:
                                    name:
                                        type: string
                                        example: "nginx-ingress"
                                    home:
                                        type: string
                                        example: "https://github.com/kubernetes/ingress-nginx"
                                    sources:
                                        type: array
                                        items:
                                            type: string
                                        example: ["https://github.com/kubernetes/ingress-nginx"]
                                    version:
                                        type: string
                                        example: "0.13.1"
                                    description:
                                        type: string
                                        example: "An nginx Ingress controller that uses ConfigMap to store the nginx configuration."
                                    keywords:
                                        type: array
                                        items:
                                            type: string
                                        example: ["ingress, nginx"]
                                    maintainers:
                                        type: array
                                        items:
                                            type: object
                                            properties:
                                                name:
                                                    type: string
                                                    example: "jackzampolin"
                                                email:
                                                    type: string
                                                    example: "jack.zampolin@gmail.com"
                                    engine:
                                        type: string
                                        example: "gotpl"

                                    icon:
                                        type: string
                                        example: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Nginx_logo.svg/500px-Nginx_logo.svg.png"
                                    appVersion:
                                        type: string
                                        example: "0.12.0"
                                    apiVersion:
                                        type: string
                                        example: "v1"
                                    deprecated:
                                        type: boolean
                                        example: flase
                                    urls:
                                        type: array
                                        items:
                                            type: string
                                        example: ["https://kubernetes-charts.storage.googleapis.com/nginx-ingress-0.13.1.tgz"]
                                    created:
                                        type: string
                                        example: "2018-04-11T18:11:24.761440762Z"
                                    digest:
                                        type: string
                                        example: "cf66d1666019b3e1647ba4dbc06a66ee7db1184629ae3669e11a9f72208eb7aa"
                            values:
                                type: string
                                example: "IyMgbmdpbngtbGVnbyBzcGlucyB1cCBhIHNjYWxhYmxlIGluZ3Jlc3MgcHJvdmlkZXIgdGhhdCBjYW4gYWxzbyBwcm92aXNpb24gU1NMIGNlcnRzCiMjIFNlZSBodHRwczovL2dpdGh1Yi5jb20vamV0c3RhY2sva3ViZS1sZWdvL3RyZWUvbWFzdGVyL2V4YW1wbGVzL25naW54IGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGltcGxlbWVudGF0aW9uCgojIyBOZ2lueCBjb25maWd1cmF0aW9uCiMjIHJlZjogaHR0cHM6Ly9naXRodWIuY29tL2t1YmVybmV0ZXMvY29udHJpYi90cmVlL21hc3Rlci9pbmdyZXNzL2NvbnRyb2xsZXJzL25naW54I2F1dG9tYXRlZC1jZXJ0aWZpY2F0ZS1tYW5hZ2VtZW50LXdpdGgta3ViZS1sZWdvCiMjCm5naW54OgogIHJlcGxpY2FDb3VudDogMQogIGltYWdlOgogICAgcmVwb3NpdG9yeTogazhzLmdjci5pby9uZ2lueC1pbmdyZXNzLWNvbnRyb2xsZXIKICAgIHRhZzogIjAuOC4zIgogICAgcHVsbFBvbGljeTogSWZOb3RQcmVzZW50CiAgc2VydmljZToKICAgIHR5cGU6IExvYWRCYWxhbmNlcgogIG1vbml0b3Jpbmc6IGZhbHNlCiAgcmVzb3VyY2VzOgogICAgbGltaXRzOgogICAgICBjcHU6IDEKICAgICAgbWVtb3J5OiAyR2kKICAgIHJlcXVlc3RzOgogICAgICBjcHU6IDEKICAgICAgbWVtb3J5OiAxMjhNaQogIGNvbmZpZ21hcDoKICAgIHByb3h5X2Nvbm5lY3RfdGltZW91dDogIjMwIgogICAgcHJveHlfcmVhZF90aW1lb3V0OiAiNjAwIgogICAgcHJveHlfc2VuZF9pbWVvdXQ6ICI2MDAiCiAgICBoc3RzX2luY2x1ZGVfc3ViZG9tYWluczogImZhbHNlIgogICAgYm9keV9zaXplOiAiNjRtIgogICAgc2VydmVyX25hbWVfaGFzaF9idWNrZXRfc2l6ZTogIjI1NiIKICAgICMgVE9ETzogZmlndXJlIG91dCBob3cgdG8gZXhwb3NlIGB7bmdpbnhfYWRkcn06ODA4MC9uZ2lueF9zdGF0dXNgLCBvbiBleGlzdGluZyBzZXJ2aWNlIG9yIGNyZWF0ZSBuZXcgb25lPwogICAgZW5hYmxlX3Z0c19zdGF0dXM6ICJmYWxzZSIKCiMjIERlZmF1bHQgQmFja2VuZCBjb25maWd1cmF0aW9uCiMjIFRvIHJ1biBhIGRpZmZlcmVudCA0MDQgcGFnZSBmb3IgdGhlIG1hbmFnZWQgZG9tYWlucyBwbGVhc2Ugc2VlIHRoZSBkb2N1bWVudGF0aW9uIGJlbG93CiMjIHJlZjogaHR0cHM6Ly9naXRodWIuY29tL2t1YmVybmV0ZXMvY29udHJpYi90cmVlL21hc3Rlci80MDQtc2VydmVyCiMjCmRlZmF1bHQ6CiAgcmVwbGljYUNvdW50OiAxCiAgaW1hZ2U6CiAgICByZXBvc2l0b3J5OiBrOHMuZ2NyLmlvL2RlZmF1bHRiYWNrZW5kCiAgICB0YWc6ICIxLjAiCiAgICBwdWxsUG9saWN5OiBJZk5vdFByZXNlbnQKICByZXNvdXJjZXM6CiAgICBsaW1pdHM6CiAgICAgIGNwdTogMQogICAgICBtZW1vcnk6IDJHaQogICAgcmVxdWVzdHM6CiAgICAgIGNwdTogMQogICAgICBtZW1vcnk6IDEyOE1pCgojIyBrdWJlLWxlZ28gY29uZmlndXJhdGlvbgojIyByZWY6IGh0dHBzOi8vZ2l0aHViLmNvbS9qZXRzdGFjay9rdWJlLWxlZ28KIyMKbGVnbzoKICBlbmFibGVkOiBmYWxzZQogIHJlcGxpY2FDb3VudDogMQogIGltYWdlOgogICAgcmVwb3NpdG9yeTogamV0c3RhY2sva3ViZS1sZWdvCiAgICB0YWc6ICIwLjEuMyIKICAgIHB1bGxQb2xpY3k6IElmTm90UHJlc2VudAogIGNvbmZpZ21hcDoKICAgIGVtYWlsOiAibXlAZW1haWwudGxkIgogICAgIyBQcm9kdWN0aW9uIExldCdzIEVuY3J5cHQgc2VydmVyCiAgICAjIHVybDogImh0dHBzOi8vYWNtZS12MDEuYXBpLmxldHNlbmNyeXB0Lm9yZy9kaXJlY3RvcnkiCiAgICAjIFRlc3QgTGV0J3MgRW5jcnlwdCBzZXJ2ZXIKICAgIHVybDogImh0dHBzOi8vYWNtZS1zdGFnaW5nLmFwaS5sZXRzZW5jcnlwdC5vcmcvZGlyZWN0b3J5ICIKICByZXNvdXJjZXM6CiAgICBsaW1pdHM6CiAgICAgIGNwdTogMQogICAgICBtZW1vcnk6IDJHaQogICAgcmVxdWVzdHM6CiAgICAgIGNwdTogMQogICAgICBtZW1vcnk6IDEyOE1pCg=="
                            readme:
                                type: string
                                example: "IyBuZ2lueC1sZWdvCgoqKlRoaXMgY2hhcnQgaGFzIGJlZW4gZGVwcmVjYXRlZCBhcyBvZiB2ZXJzaW9uIDAuMi4xIGFuZCB3aWxsIG5vdCBiZSB1cGRhdGVkLiBQbGVhc2UgdXNlIHRoZSBuZ2lueC1pbmdyZXNzIGFuZCAob3B0aW9uYWwpIGt1YmUtbGVnbyBjaGFydHMgaW5zdGVhZC4qKgoKW25naW54LWxlZ29dKGh0dHBzOi8vZ2l0aHViLmNvbS9qZXRzdGFjay9rdWJlLWxlZ28vdHJlZS9tYXN0ZXIvZXhhbXBsZXMvbmdpbngpIGlzIGEgY2hhcnQgZm9yIGFuIFtgbmdpbnhgIGluZ3Jlc3NdKGh0dHBzOi8vZ2l0aHViLmNvbS9rdWJlcm5ldGVzL2NvbnRyaWIvdHJlZS9tYXN0ZXIvaW5ncmVzcy9jb250cm9sbGVycy9uZ2lueCkgd2l0aCBvcHRpb25hbCBzdXBwb3J0IGZvciBhdXRvbWF0aWNhbGx5IGdlbmVyYXRpbmcgYFNTTGAgY2VydCBmb3IgdGhlIG1hbmFnZWQgcm91dGVzLgoKVG8gdXNlIHRoaXMgaW5ncmVzcyBjb250b2xsZXIgYWRkIHRoZSBmb2xsb3dpbmcgYW5ub3RhdGlvbnMgdG8gdGhlIGBpbmdyZXNzYCByZXNvdXJjZXMgeW91IHdvdWxkIGxpa2UgdG8gcm91dGUgdGhyb3VnaCBpdDoKCmBgYHlhbWwKYXBpVmVyc2lvbjogZXh0ZW5zaW9ucy92MWJldGExCmtpbmQ6IEluZ3Jlc3MKbWV0YWRhdGE6CiAgbmFtZXNwYWNlOiBmb28KICBhbm5vdGF0aW9uczoKICAgICMgQWRkIHRvIHJvdXRlIHRocm91Z2ggdGhlIG5naW54IHNlcnZpY2UKICAgIGt1YmVybmV0ZXMuaW8vaW5ncmVzcy5jbGFzczogbmdpbngKICAgICMgQWRkIHRvIGdlbmVyYXRlIGNlcnRpZmljYXRlcyBmb3IgdGhpcyBpbmdyZXNzCiAgICBrdWJlcm5ldGVzLmlvL3Rscy1hY21lOiAidHJ1ZSIKc3BlYzoKICB0bHM6CiAgICAjIFdpdGggdGhpcyBjb25maWd1cmF0aW9uIGt1YmUtbGVnbyB3aWxsIGdlbmVyYXRlIGEgc2VjcmV0IGluIG5hbWVzcGFjZSBmb28gY2FsbGVkIGBleGFtcGxlLXRsc2AKICAgICMgZm9yIHRoZSBVUkwgYHd3dy5leGFtcGxlLmNvbWAKICAgIC0gaG9zdHM6CiAgICAgIC0gInd3dy5leGFtcGxlLmNvbSIKICAgICAgc2VjcmV0TmFtZTogZXhhbXBsZS10bHMKYGBgCgojIyBUTDtEUjsKCmBgYGJhc2gKJCBoZWxtIGluc3RhbGwgc3RhYmxlL2t1YmUtbGVnbwpgYGAKCiMjIEludHJvZHVjdGlvbgoKVGhpcyBjaGFydCBib290c3RyYXBzIGFuIG5naW54LWxlZ28gZGVwbG95bWVudCBvbiBhIFtLdWJlcm5ldGVzXShodHRwOi8va3ViZXJuZXRlcy5pbykgY2x1c3RlciB1c2luZyB0aGUgW0hlbG1dKGh0dHBzOi8vaGVsbS5zaCkgcGFja2FnZSBtYW5hZ2VyLgoKIyMgUHJlcmVxdWlzaXRlcwoKLSBLdWJlcm5ldGVzIDEuNCsgd2l0aCBCZXRhIEFQSXMgZW5hYmxlZAoKIyMgSW5zdGFsbGluZyB0aGUgQ2hhcnQKClRvIGluc3RhbGwgdGhlIGNoYXJ0IHdpdGggdGhlIHJlbGVhc2UgbmFtZSBgbXktcmVsZWFzZWA6CgpgYGBiYXNoCiQgaGVsbSBpbnN0YWxsIC0tbmFtZSBteS1yZWxlYXNlIHN0YWJsZS9uZ2lueC1sZWdvCmBgYAoKVGhlIGNvbW1hbmQgZGVwbG95cyBuZ2lueC1sZWdvIG9uIHRoZSBLdWJlcm5ldGVzIGNsdXN0ZXIgaW4gdGhlIGRlZmF1bHQgY29uZmlndXJhdGlvbi4gVGhlIFtjb25maWd1cmF0aW9uXSgjY29uZmlndXJhdGlvbikgc2VjdGlvbiBsaXN0cyB0aGUgcGFyYW1ldGVycyB0aGF0IGNhbiBiZSBjb25maWd1cmVkIGR1cmluZyBpbnN0YWxsYXRpb24uCgo+ICoqVGlwKio6IExpc3QgYWxsIHJlbGVhc2VzIHVzaW5nIGBoZWxtIGxpc3RgCgojIyBVbmluc3RhbGxpbmcgdGhlIENoYXJ0CgpUbyB1bmluc3RhbGwvZGVsZXRlIHRoZSBgbXktcmVsZWFzZWAgZGVwbG95bWVudDoKCmBgYGJhc2gKJCBoZWxtIGRlbGV0ZSBteS1yZWxlYXNlCmBgYAoKVGhlIGNvbW1hbmQgcmVtb3ZlcyBhbGwgdGhlIEt1YmVybmV0ZXMgY29tcG9uZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIGNoYXJ0IGFuZCBkZWxldGVzIHRoZSByZWxlYXNlLgoKIyMgQ29uZmlndXJhdGlvbgoKU2VlIGB2YWx1ZXMueWFtbGAgZm9yIGNvbmZpZ3VyYXRpb24gbm90ZXMuIFNwZWNpZnkgZWFjaCBwYXJhbWV0ZXIgdXNpbmcgdGhlIGAtLXNldCBrZXk9dmFsdWVbLGtleT12YWx1ZV1gIGFyZ3VtZW50IHRvIGBoZWxtIGluc3RhbGxgLiBGb3IgZXhhbXBsZSwKCmBgYGJhc2gKJCBoZWxtIGluc3RhbGwgLS1uYW1lIG15LXJlbGVhc2UgXAogIC0tc2V0IGxlZ28uZW5hYmxlZD1mYWxzZSBcCiAgICBzdGFibGUvbmdpbngtbGVnbwpgYGAKCkluc3RhbGxzIHRoZSBjaGFydCB3aXRob3V0IGt1YmUtbGVnbyBhbmQgdGhlIGFiaWxpdHkgdG8gZ2VuZXJhdGUgY2VydHMuCgpBbHRlcm5hdGl2ZWx5LCBhIFlBTUwgZmlsZSB0aGF0IHNwZWNpZmllcyB0aGUgdmFsdWVzIGZvciB0aGUgcGFyYW1ldGVycyBjYW4gYmUgcHJvdmlkZWQgd2hpbGUgaW5zdGFsbGluZyB0aGUgY2hhcnQuIEZvciBleGFtcGxlLAoKYGBgYmFzaAokIGhlbG0gaW5zdGFsbCAtLW5hbWUgbXktcmVsZWFzZSAtZiB2YWx1ZXMueWFtbCBzdGFibGUvbmdpbngtbGVnbwpgYGAKCj4gKipUaXAqKjogWW91IGNhbiB1c2UgdGhlIGRlZmF1bHQgW3ZhbHVlcy55YW1sXSh2YWx1ZXMueWFtbCkK"

        InstallSecretsRequest:
            type: object
            required:
                - namespace
            properties:
                namespace:
                    type: string
                    example: "default"
                query:
                    type: object
                    properties:
                        type:
                            type: string
                            example: "amazon"
                        ids:
                            type: array
                            items:
                                type: string
                            example: ["02ba59be9de457d3f04a02add7238489cf927511c6cd2a8a2aede19eac2a299b"]
                        tags:
                            type: array
                            items:
                                type: string
                            example: ["repo:pipeline"]

        InstallSecretRequest:
            type: object
            required:
                - namespace
            properties:
                sourceSecretName:
                    type: string
                    example: my-secret
                namespace:
                    type: string
                    example: "default"
                spec:
                    type: object
                    additionalProperties:
                        $ref: '#/components/schemas/InstallSecretRequestSpecItem'

        InstallSecretRequestSpecItem:
            type: object
            properties:
                source:
                    type: string
                sourceMap:
                    type: object
                    additionalProperties:
                        type: string

        InstallSecretResponse:
            type: object
            required:
                - name
                - sourcing
            properties:
                name:
                    type: string
                    example: "my-aws-secret"
                sourcing:
                    type: string
                    enum: [env, volume]

        ProfileListResponse:
            type: object
            properties:
                name:
                    type: string
                    example: "default"
                location:
                    type: string
                    example: "us-central1-a"
                cloud:
                    type: string
                    example: "google"
                properties:
                    type: object
                    oneOf:
                        - $ref: '#/components/schemas/ClusterProfileEKS'
                        - $ref: '#/components/schemas/ClusterProfileAKS'
                        - $ref: '#/components/schemas/ClusterProfileGKE'
                    example:
                        gke:
                            master:
                                version: "1.10"
                            nodeVersion: "1.10"
                            nodePools:
                                pool1:
                                    count: 1
                                    instanceType: "n1-standard-1"

        ClusterProfileEKS:
            type: object
            properties:
                eks:
                    type: object
                    properties:
                        version:
                            type: string
                            example: "1.10"
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsAmazon'

        ClusterProfileAKS:
            type: object
            properties:
                aks:
                    type: object
                    properties:
                        kubernetesVersion:
                            type: string
                            example: "1.9.2"
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsAzure'

        ClusterProfileGKE:
            type: object
            properties:
                gke:
                    type: object
                    properties:
                        master:
                            type: object
                            properties:
                                version:
                                    type: string
                                    example: "1.8.7-gke.1"
                        nodeVersion:
                            type: string
                            example: "1.8.7-gke.1"
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsGoogle'

        AddClusterProfileRequest:
            type: object
            properties:
                name:
                    type: string
                    example: "myCluster-profile"
                location:
                    type: string
                    example: "us-central1-a"
                cloud:
                    type: string
                    example: "google"
                properties:
                    type: object
                    oneOf:
                        - $ref: '#/components/schemas/AddClusterProfileEKS'
                        - $ref: '#/components/schemas/AddClusterProfileAKS'
                        - $ref: '#/components/schemas/AddClusterProfileGKE'
                        - $ref: '#/components/schemas/CreateUpdateOKEProperties'
                    example:
                        gke:
                            master:
                                version: "1.8.7-gke.1"
                            nodeVersion: "1.8.7-gke.1"
                            nodePools:
                                pool1:
                                    count: 1
                                    instanceType: "n1-standard-1"

        AddClusterProfileEKS:
            type: object
            properties:
                eks:
                    type: object
                    properties:
                        version:
                            type: string
                            example: "1.10"
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsAmazon'

        AddClusterProfileAKS:
            type: object
            properties:
                aks:
                    type: object
                    properties:
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsAzure'
                        kubernetesVersion:
                            type: string
                            example: "1.8.2"

        AddClusterProfileGKE:
            type: object
            properties:
                gke:
                    type: object
                    properties:
                        master:
                            type: object
                            properties:
                                version:
                                    type: string
                                    example: "1.8.7-gke.1"
                        nodeVersion:
                            type: string
                            example: "1.8.7-gke.1"
                        nodePools:
                            type: object
                            additionalProperties:
                                $ref: '#/components/schemas/NodePoolsGoogle'

        TokenCreateRequest:
            type: object
            required:
                - name
            properties:
                name:
                    type: string
                    example: my API token
                virtualUser:
                    type: string
                    example: banzaicloud/pipeline

        TokenCreateResponse:
            type: object
            required:
                - id
                - token
                - name
            properties:
                id:
                    type: string
                    example: f24c74d7-53f3-4d78-b3d4-f23f89e81bec
                token:
                    type: string
                    example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJodHRwczovL3BpcGVsaW5lLmJhbnphaWNsb3VkLmNvbSIsImp0aSI6ImYyNGM3NGQ3LTUzZjMtNGQ3OC1iM2Q0LWYyM2Y4OWU4MWJlYyIsImlhdCI6MTUyNzg0NTQ1OCwiaXNzIjoiaHR0cHM6Ly9iYW56YWljbG91ZC5jb20vIiwic3ViIjoiMSIsInNjb3BlIjoiYXBpOmludm9rZSIsInR5cGUiOiJ1c2VyIiwidGV4dCI6ImJvbmlmYWlkbyJ9.DMQcM0De3A_R1JOPDGqharh9NIjz-uBFeJgiq5JSej0
                name:
                    type: string
                    example: my API token

        TokenListResponseItem:
            type: object
            required:
                - id
                - createdAt
                - name
            properties:
                id:
                    type: string
                    example: f24c74d7-53f3-4d78-b3d4-f23f89e81bec
                createdAt:
                    type: string
                    example: "2018-06-01T11:26:40.044297036+02:00"
                name:
                    type: string
                    example: my API token

        SecretItem:
            type: object
            properties:
                id:
                    type: string
                    example: "6fa2288c361becce3e30ba4c41be7d8ba01e3580566f7acc76a7f99994474c46"
                name:
                    type: string
                    example: "my-google-secret"
                type:
                    type: string
                    example: "google"
                version:
                    type: integer
                    example: 1
                updatedAt:
                    type: string
                    format: date-time
                    example: "2018-03-09T13:24:49+01:00"
                updatedBy:
                    type: string
                    example: banzaiuser
                tags:
                    type: array
                    items:
                        type: string
                    example: [ "tag1", "tag2" ]
                values:
                    type: object
                    example:
                        type: "<hidden>"
                        project_id: "<hidden>"
                        private_key_id: "<hidden>"
                        private_key: "<hidden>"
                        client_email: "<hidden>"
                        client_id: "<hidden>"
                        auth_uri: "<hidden>"
                        token_uri: "<hidden>"
                        auth_provider_x509_cert_url: "<hidden>"
                        client_x509_cert_url: "<hidden>"

        CreateSecretResponse:
            type: object
            properties:
                name:
                    type: string
                    example: "My-google-secret"
                type:
                    type: string
                    example: "google"
                id:
                    type: string
                    example: "62bc3c75-91fb-4670-bad4-24b401a9deac"
                error:
                    type: string
                    example: "Validation failed"
                updatedAt:
                    type: string
                    example: "2018-07-01T08:27:23.2636996Z"
                updatedBy:
                    type: string
                    example: "username"
                version:
                    type: integer
                    example: 1

        CreateSecretRequest:
            type: object
            required:
                - name
                - type
                - values
            properties:
                name:
                    type: string
                    example: "My google secret"
                type:
                    type: string
                    example: "google"
                tags:
                    type: array
                    items:
                        type: string
                    example: [ "repo:pipeline", "tag2" ]
                version:
                    type: integer
                    example: 1
                values:
                    type: object
                    oneOf:
                        - $ref: '#/components/schemas/SecretKeyValueAmazon'
                        - $ref: '#/components/schemas/SecretKeyValueAzure'
                        - $ref: '#/components/schemas/SecretKeyValueGoogle'
                        - $ref: '#/components/schemas/SecretKeyValueOracle'
                        - $ref: '#/components/schemas/SecretKeyValueKubernetes'
                        - $ref: '#/components/schemas/SecretKeyValueGeneric'
                        - $ref: '#/components/schemas/SecretKeyValueTLS'
                    example:
                        type: string
                        project_id: string
                        private_key_id: string
                        private_key: string
                        client_email: string
                        client_id: string
                        auth_uri: string
                        token_uri: string
                        auth_provider_x509_cert_url: string
                        client_x509_cert_url: string

        SecretKeyValueAmazon:
            type: object
            required:
                - AWS_ACCESS_KEY_ID
                - AWS_SECRET_ACCESS_KEY
            properties:
                AWS_ACCESS_KEY_ID:
                    type: string
                AWS_SECRET_ACCESS_KEY:
                    type: string

        SecretKeyValueAzure:
            type: object
            required:
                - AZURE_CLIENT_ID
                - AZURE_CLIENT_SECRET
                - AZURE_TENANT_ID
                - AZURE_SUBSCRIPTION_ID
            properties:
                AZURE_CLIENT_ID:
                    type: string
                AZURE_CLIENT_SECRET:
                    type: string
                AZURE_TENANT_ID:
                    type: string
                AZURE_SUBSCRIPTION_ID:
                    type: string

        SecretKeyValueGoogle:
            type: object
            required:
                - type
                - project_id
                - private_key_id
                - private_key
                - client_email
                - client_id
                - auth_uri
                - token_uri
                - auth_provider_x509_cert_url
                - client_x509_cert_url
            properties:
                type:
                    type: string
                project_id:
                    type: string
                private_key_id:
                    type: string
                private_key:
                    type: string
                client_email:
                    type: string
                client_id:
                    type: string
                auth_uri:
                    type: string
                token_uri:
                    type: string
                auth_provider_x509_cert_url:
                    type: string
                client_x509_cert_url:
                    type: string

        SecretKeyValueOracle:
            type: object
            required:
                - user_ocid
                - tenancy_ocid
                - api_key
                - api_key_fingerprint
                - region
                - compartment_ocid
            properties:
                user_ocid:
                    type: string
                tenancy_ocid:
                    type: string
                api_key:
                    type: string
                api_key_fingerprint:
                    type: string
                region:
                    type: string
                client_id:
                    type: string

        SecretKeyValueTLS:
            type: object
            required:
                - hosts
            properties:
                hosts:
                    type: string
                validity:
                    type: string
                caCert:
                    type: string
                caKey:
                    type: string
                serverCert:
                    type: string
                serverKey:
                    type: string
                clientCert:
                    type: string
                clientKey:
                    type: string

        SecretKeyValueKubernetes:
            type: object
            properties:
                K8Sconfig:
                    type: string

        SecretKeyValueGeneric:
            type: object
            properties:
                any:
                    type: string

        SecretsNotFound:
            type: object
            properties:
                code:
                    type: integer
                    example: 404
                message:
                    type: string
                    example: "Secrets not found"
                error:
                    type: string
                    example: "There are no secrets with [1] organization id and [15205947761] secret id"

        OrganizationListItemResponse:
            type: object
            properties:
                id:
                    type: integer
                    example: 1
                createdAt:
                    type: string
                    example: "2018-03-09T13:24:49+01:00"
                updatedAt:
                    type: string
                    example: "2018-03-09T13:24:49+01:00"
                name:
                    type: string
                    example: "myOrgName"

        OrganizationCreateResponse:
            type: object
            properties:
                id:
                    type: integer
                    example: 1
                createdAt:
                    type: string
                    example: "2018-03-09T13:24:49+01:00"
                updatedAt:
                    type: string
                    example: "2018-03-09T13:24:49+01:00"
                name:
                    type: string
                    example: "myOrgName"
                users:
                    type: array
                    items:
                        $ref: '#/components/schemas/User'


        User:
            type: object
            properties:
                id:
                    type: integer
                    example: 1
                createdAt:
                    type: string
                    example: "2018-03-09T13:24:49+01:00"
                updatedAt:
                    type: string
                    example: "2018-03-09T13:24:49+01:00"
                name:
                    type: string
                    example: "myName"
                email:
                    type: string
                    example: "my@email.com"
                login:
                    type: string
                    example: "username"
                image:
                    type: string
                    example: "githubImageUrl.com/imageId/3"
                organizations:
                    type: object
                    example: null

        OrganizationNotFound:
            type: object
            properties:
                code:
                    type: integer
                    example: 404
                message:
                    type: string
                    example: "Organization not found"
                error:
                    type: string
                    example: "Organization not found"

        AllowedSecretTypesResponse:
            type: object
            properties:
                amazon:
                    $ref: '#/components/schemas/AllowedSecretTypeResponse'
                azure:
                    $ref: '#/components/schemas/AllowedSecretTypeResponse'
                google:
                    $ref: '#/components/schemas/AllowedSecretTypeResponse'
                oracle:
                    $ref: '#/components/schemas/AllowedSecretTypeResponse'
                kubernetes:
                    $ref: '#/components/schemas/AllowedSecretTypeResponse'
                generic:
                    $ref: '#/components/schemas/AllowedSecretTypeResponse'
                fn:
                    $ref: '#/components/schemas/AllowedSecretTypeResponse'
                password:
                    $ref: '#/components/schemas/AllowedSecretTypeResponse'
                tls:
                    $ref: '#/components/schemas/AllowedSecretTypeResponse'
                ssh:
                    $ref: '#/components/schemas/AllowedSecretTypeResponse'

        AllowedSecretTypeResponse:
            type: object
            properties:
                fields:
                    type: array
                    items:
                        type: object
                        properties:
                            name:
                                type: string
                            required:
                                type: boolean
                            description:
                                type: string
                sourcing:
                    type: string
                    enum: [env, volume]

        ListUserResponse:
            type: array
            items:
                $ref: '#/components/schemas/User'

        SupportedCloudsResponse:
            type: object
            properties:
                items:
                    type: array
                    items:
                        $ref: '#/components/schemas/SupportedCloudItem'

        SupportedCloudItem:
            type: object
            properties:
                name:
                    type: string
                    example: "Google Kubernetes Engine"
                key:
                    type: string
                    example: "google"

        AmazonConfigResponse:
            type: object
            properties:
                type:
                    type: string
                    example: "amazon"
                nameRegexp:
                    type: string
                    example: "^[A-z0-9-_]{1,255}$"
                locations:
                    type: string
                    example: [ "ap-south-1", "us-east-2" ]
                image:
                    type: object
                    properties:
                        eu-west-1:
                            type: array
                            items:
                                type: string
                            example: [ "ami-6202561b", "ami-ece5b095" ]
                instanceType:
                    type: object
                    properties:
                        eu-west-1:
                            type: array
                            items:
                                type: string
                            example: [ "t2.nano", "t2.micro" ]

        AzureConfigResponse:
            type: object
            properties:
                type:
                    type: string
                    example: "azure"
                nameRegexp:
                    type: string
                    example: "^[a-z0-9_]{0,31}[a-z0-9]$"
                locations:
                    type: string
                    example: [ "eastasia", "eastus" ]
                instanceType:
                    type: object
                    properties:
                        eastus:
                            type: array
                            items:
                                type: string
                            example: [ "Standard_B1ms", "Standard_B1s" ]
                kubernetes_versions:
                    type: array
                    items:
                        type: string
                    example: [ "1.8.1", "1.8.6" ]

        GoogleConfigResponse:
            type: object
            properties:
                type:
                    type: string
                    example: "google"
                nameRegexp:
                    type: string
                    example: "^[a-z]$|^[a-z][a-z0-9-]{0,38}[a-z0-9]$"
                locations:
                    type: string
                    example: [ "us-east1-c", "us-east1-d" ]
                instanceType:
                    type: object
                    properties:
                        asia-east1-a:
                            type: array
                            items:
                                type: string
                            example: [ "f1-micro", "g1-small" ]
                kubernetes_versions:
                    type: object
                    properties:
                        defaultClusterVersion:
                            type: string
                            example: "1.8.8-gke.0"
                        defaultImageType:
                            type: string
                            example: "COS"
                        validImageTypes:
                            type: array
                            items:
                                type: string
                            example: [ "COS" ]
                        validMasterVersions:
                            type: array
                            items:
                                type: string
                            example: ["1.9.6-gke.0", "1.10"]
                        validNodeVersions:
                            type: array
                            items:
                                type: string
                            example: ["1.9.6-gke.0", "1.10"]

        GetClusterStatusResponse:
            type: object
            properties:
                status:
                    type: string
                    example: "RUNNING"
                statusMessage:
                    type: string
                    example: "Cluster is running"
                name:
                    type: string
                    example: "myClusterName"
                cloud:
                    type: string
                    example: "google"
                distribution:
                    type: string
                    example: "gke"
                location:
                    type: string
                    example: "us-central1-a"
                id:
                    type: integer
                    example: 1
                createdAt:
                    type: string
                    example: "2018-07-03T14:23:19+02:00"
                creatorName:
                    type: string
                    example: "userName"
                creatorId:
                    type: integer
                    example: 1
                region:
                    type: string
                    example: "us-central1"
                nodePools:
                    type: object
                    additionalProperties:
                        $ref: '#/components/schemas/NodePoolStatus'

        NodePoolStatus:
            oneOf:
                - $ref: '#/components/schemas/NodePoolStatusAmazon'
                - $ref: '#/components/schemas/NodePoolStatusAzure'
                - $ref: '#/components/schemas/NodePoolStatusGoogle'
                - $ref: '#/components/schemas/NodePoolStatusOracle'
            example:
                count: 1
                instanceType: "n1-standard-1"

        NodePoolStatusAmazon:
            type: object
            properties:
                instanceType:
                    type: string
                    example: "m4.xlarge"
                spot_price:
                    type: string
                    example: "0.2"
                autoscaling:
                    type: boolean
                    example: true
                count:
                    type: integer
                    example: 1
                minCount:
                    type: integer
                    example: 1
                maxCount:
                    type: integer
                    example: 2
                image:
                    type: string
                    example: "ami-4d485ca7"

        NodePoolStatusAzure:
            type: object
            properties:
                autoscaling:
                    type: boolean
                    example: true
                count:
                    type: integer
                    example: 1
                minCount:
                    type: integer
                    example: 1
                maxCount:
                    type: integer
                    example: 2
                instanceType:
                    type: string
                    example: "Standard_D4_v2"

        NodePoolStatusGoogle:
            type: object
            properties:
                autoscaling:
                    type: boolean
                    example: true
                count:
                    type: integer
                    example: 1
                minCount:
                    type: integer
                    example: 1
                maxCount:
                    type: integer
                    example: 2
                instanceType:
                    type: string
                    example: "n1-standard-1"

        NodePoolStatusOracle:
            type: object
            properties:
                count:
                    type: integer
                    example: 1
                minCount:
                    type: integer
                    example: 1
                maxCount:
                    type: integer
                    example: 2
                instanceType:
                    type: string
                    example: "VM.Standard1.1"
                image:
                    type: string
                    example: "ami-4d485ca7"
                autoscaling:
                    type: boolean
                    example: false


        CreateObjectStoreBucketRequest:
            type: object
            required:
                - name
                - properties
            properties:
                secretId:
                    type: string
                secretName:
                    type: string
                    example: "my-aws-secret"
                name:
                    type: string
                    example: "mybucket"
                properties:
                    oneOf:
                        - $ref: '#/components/schemas/CreateAmazonObjectStoreBucketProperties'
                        - $ref: '#/components/schemas/CreateAzureObjectStoreBucketProperties'
                        - $ref: '#/components/schemas/CreateGoogleObjectStoreBucketProperties'
                        - $ref: '#/components/schemas/CreateOracleObjectStoreBucketProperties'

        CreateAmazonObjectStoreBucketProperties:
            type: object
            properties:
                amazon:
                    type: object
                    required:
                        - location
                    properties:
                        location:
                            type: string
                            example: "eu-west-1"

        CreateGoogleObjectStoreBucketProperties:
            type: object
            properties:
                google:
                    type: object
                    required:
                        - location
                    properties:
                        location:
                            type: string
                            example: "europe"

        CreateAzureObjectStoreBucketProperties:
            type: object
            properties:
                azure:
                    type: object
                    required:
                        - storageAccount
                        - resourceGroup
                        - location
                    properties:
                        storageAccount:
                            type: string
                            example: "mystorageaccount"
                        location:
                            type: string
                            example: "westeurope"
                        resourceGroup:
                            type: string

        CreateOracleObjectStoreBucketProperties:
            type: object
            properties:
                oracle:
                    type: object
                    required:
                        - location
                    properties:
                        location:
                            type: string

        CreateObjectStoreBucketResponse:
            type: object
            required:
                - name
                - cloud
            properties:
                name:
                    type: string
                    example: "mybucket"
                cloud:
                    type: string
                    enum: [amazon, azure, google, oracle, alibaba]
                    example: amazon

        BucketInfo:
            type: object
            required:
                - name
                - managed
                - cloud
                - status
            properties:
                name:
                    description: "the name of the object storage / bucket"
                    type: string
                    example: "mybucket"
                managed:
                    description: "true if the bucket has been created via piepeline"
                    type: boolean
                    example: true
                notes:
                    description: "true if the bucket has been created via piepeline"
                    type: string
                    example: "There's no secret with this ID"
                secret:
                    type: object
                    required:
                        - id
                    properties:
                        id:
                            type: string
                            example: "cc051aeaf686444e2f125d0e79eb051aaaf4fb73384f7b0f8c89e84a0502dca1"
                        name:
                            type: string
                            example: "mysecretname"
                azure:
                    $ref: '#/components/schemas/AzureBlobStorageProps'
                status:
                    description: the status of the bucket
                    type: string
                    enum: [CREATING, AVAILABLE, ERROR_CREATE, DELETING, ERROR_DELETE]
                statusMessage:
                    description: the reason for the error status
                    type: string

        ListStorageBucketsResponse:
            type: array
            items:
                $ref: '#/components/schemas/BucketInfo'

        AzureBlobStorageProps:
            type: object
            required:
                - resourceGroup
                - storageAccount
            properties:
                resourceGroup:
                    type: string
                storageAccount:
                    type: string

        PodDetailsResponse:
            type: array
            items:
                $ref: '#/components/schemas/PodItem'

        PodItem:
            type: object
            properties:
                name:
                    type: string
                    example: "pipeline-traefik-7c47dc7bd7-twzpl"
                namespace:
                    type: string
                    example: "default"
                createdAt:
                    type: string
                    example: "2018-08-01T09:04:33+02:00"
                labels:
                    type: object
                    properties:
                        app:
                            type: string
                            example: "pipeline-traefik"
                        chart:
                            type: string
                            example: "traefik-1.14.2"
                        release:
                            type: string
                            example: "pipeline"
                restartPolicy:
                    type: string
                    example: "Always"
                conditions:
                    type: array
                    items:
                        $ref: '#/components/schemas/PodCondition'
                resourceSummary:
                    type: object
                    properties:
                        cpu:
                            $ref: '#/components/schemas/ResourceItem'
                        memory:
                            $ref: '#/components/schemas/ResourceItem'

        PodCondition:
            type: object
            properties:
                type:
                    type: string
                    example: "Initialized"
                status:
                    type: string
                    example: "True"
                lastProbeTime:
                    type: string
                    example: null
                lastTransitionTime:
                    type: string
                    example: "2018-08-01T07:04:37Z"

        ClusterDetailsResponse:
            type: object
            properties:
                createdAt:
                    type: string
                    example: "2018-07-03T14:19:26+02:00"
                creatorName:
                    type: string
                    example: "userName"
                creatorId:
                    type: integer
                    example: 1
                name:
                    type: string
                    example: "my-google-cluster"
                id:
                    type: integer
                    example: 1
                secretId:
                    type: string
                    example: "c8f9c9fc3835b9a3721165afea97ffb78e1375552ab112ed54aee30b29c962ae"
                secretName:
                    type: string
                    example: "paas-dev"
                location:
                    type: string
                    example: "eu-west-1"
                endpoint:
                    type: string
                    example: "34.240.231.134"
                region:
                    type: string
                    example: "us-central1"
                status:
                    type: string
                    example: "RUNNING"
                nodePools:
                    type: object
                    additionalProperties:
                        $ref: '#/components/schemas/NodePoolStatus'
                master:
                    $ref: '#/components/schemas/ResourceSummaryItem'
                totalSummary:
                    type: object
                    properties:
                        cpu:
                            $ref: '#/components/schemas/ResourceItem'
                        memory:
                            $ref: '#/components/schemas/ResourceItem'

        ResourceSummaryItem:
            type: object
            properties:
                ip-10-0-100-180.eu-west-1.compute.internal:
                    type: object
                    properties:
                        status:
                            type: string
                            example: "Ready"
                        cpu:
                            $ref: '#/components/schemas/ResourceItem'
                        memory:
                            $ref: '#/components/schemas/ResourceItem'

        ResourceItem:
            type: object
            properties:
                capacity:
                    type: string
                    example: "4"
                allocatable:
                    type: string
                    example: "4"
                limit:
                    type: string
                    example: "100m"
                request:
                    type: string
                    example: "380m"

        BasePostHook:
            type: object
            properties:
                PostHookFunctionName:
                    type: object

        LoggingPostHook:
            type: object
            properties:
                InstallLogging:
                    type: object
                    required:
                        - bucketName
                        - secretId
                        - tls
                    properties:
                        bucketName:
                            type: string
                            example: "mybucketname"
                        region:
                            type: string
                            example: "region"
                        resourceGroup:
                            type: string
                            example: "myResourceGroup"
                        storageAccount:
                            type: string
                            example: "myStorageAccount"
                        secretId:
                            type: string
                            example: "62bc3c75-91fb-4670-bad4-24b401a9deac"
                        secretName:
                            type: string
                            example: "my-aws-secret"
                        tls:
                            $ref: '#/components/schemas/GenTLSForLogging'

        ReRunPostHook:
            type: object
            oneOf:
                - $ref: '#/components/schemas/LoggingPostHook'
                - $ref: '#/components/schemas/BasePostHook'
            example:
                InstallLogging:
                    bucketName: "mybucketname"
                    region: "region"
                    secretId: "62bc3c75-91fb-4670-bad4-24b401a9deac"
                    tls:
                        tlsEnabled: true
                        genTlsSecretName: "loggingSecret"
                        namespace: "default"
                        tlsHost: "fluent"


        GenTLSForLogging:
            type: object
            required:
                - tlsEnabled
            properties:
                tlsEnabled:
                    type: boolean
                    example: true
                genTlsSecretName:
                    type: string
                    example: "loggingSecret"
                namespace:
                    type: string
                    example: "default"
                tlsHost:
                    type: string
                    example: "fluent"


        CreateResourceGroup:
            type: object
            required:
                - name
                - location
                - secretId
            properties:
                name:
                    type: string
                    example: "newResourceGroupName"
                location:
                    type: string
                    example: "westeurope"
                secretId:
                    type: string
                    example: "62bc3c75-91fb-4670-bad4-24b401a9deac"

        ResourceGroupCreated:
            type: object
            properties:
                name:
                    type: string
                    example: "NewResourceGroupName"

        DeploymentScalingRequest:
            title: Create / Update Deployment Scaling Request
            example:
                scaleTarget: k8sDeploymentName
                minReplicas: 1
                maxReplicas: 3
                cpu:
                    targetAverageUtilization: 70
                memory:
                    targetAverageValue: 500Mi
                customMetrics:
                    custom_metric_name:
                        type: pod
                        targetAverageValue: 700m
            type: object
            properties:
                scaleTarget:
                    example: k8sDeploymentName
                    type: string
                minReplicas:
                    example: 1
                    type: integer
                    format: int32
                maxReplicas:
                    example: 3
                    type: integer
                    format: int32
                cpu:
                    $ref: '#/components/schemas/ResourceMetric'
                memory:
                    $ref: '#/components/schemas/ResourceMetric'
                customMetrics:
                    example:
                        custom_metric_name:
                            type: pod
                            targetAverageValue: 700m
                    type: object
                    additionalProperties:
                        $ref: '#/components/schemas/CustomMetric'
            required:
                - scaleTarget
                - minReplicas
                - maxReplicas

        ResourceMetric:
            title: ResourceMetric
            type: object
            properties:
                targetAverageValue:
                    example: 700m
                    type: string
                targetAverageValueType:
                    type: string
                    enum: [quantity, percentage]
            required:
                - targetAverageValue
                - targetAverageValueType

        CustomMetric:
            title: CustomMetric
            type: object
            properties:
                type:
                    example: pod
                    type: string
                targetAverageValue:
                    example: 700m
                    type: string
            required:
                - type
                - targetValue

        DeploymentScalingResponse:
            title: Get Deployment Scaling Response
            example:
                - scaleTarget: k8sDeploymentName
                  kind: Deployment
                  minReplicas: 1
                  maxReplicas: 3
                  cpu:
                      targetAverageValueType: 'percentage'
                      targetAverageValue: 60
                      currentAverageValue: 0
                  memory:
                      targetAverageValueType: 'quantity'
                      targetAverageValue: '1100Mi'
                      currentAverageUtilization: 'quantity'
                      currentAverageValue: 780013568
                  customMetrics:
                      custom_metric_name:
                          type: pod
                          targetAverageValue: 700m
                          currentAverageValue: 300m
                  status:
                      currentReplicas: 1
                      desiredReplicas: 1
                      message: 'ScalingActive = true, lastTransitionTime: 2018-00-22T15:31:16Z, the HPA was able to succesfully calculate a replica count from memory resource'
            type: array
            items:
                type: object
                properties:
                    scaleTarget:
                        example: k8sDeploymentName
                        type: string
                    kind:
                        example: Deployment
                        type: string
                    minReplicas:
                        example: 1
                        type: integer
                        format: int32
                    maxReplicas:
                        example: 3
                        type: integer
                        format: int32
                    cpu:
                        $ref: '#/components/schemas/ResourceMetricStatus'
                    memory:
                        $ref: '#/components/schemas/ResourceMetricStatus'
                    customMetrics:
                        example:
                            custom_metric_name:
                                type: pod
                                targetAverageValue: 700m
                                currentAverageValue: 300m
                        type: object
                        additionalProperties:
                            $ref: '#/components/schemas/CustomMetricStatus'
                    status:
                        $ref: '#/components/schemas/DeploymentScaleStatus'

        ResourceMetricStatus:
            type: object
            properties:
                allOf:
                    $ref: '#/components/schemas/ResourceMetric'
                currentAverageValue:
                    example: 100m
                    type: string
                currentAverageValueType:
                    type: string
                    enum: [quantity, percentage]

        CustomMetricStatus:
            type: object
            properties:
                allOf:
                    $ref: '#/components/schemas/CustomMetric'
                currentAverageValue:
                    example: 300m
                    type: string

        DeploymentScaleStatus:
            type: object
            properties:
                currentReplicas:
                    example: 1
                    type: integer
                    format: int32
                desiredReplicas:
                    example: 1
                    type: integer
                    format: int32
                message:
                    example: 'ScalingActive = true, lastTransitionTime: 2018-08-22T15:31:16Z, the HPA was able to succesfully calculate a replica count from memory resource'
                    type: string

        ScanLogList:
            type: array
            items:
                $ref: "#/components/schemas/ScanLogItem"

        ScanLogItem:
            type: object
            properties:
                releaseName:
                    type: string
                    example: 'flying-monkey'
                resource:
                    type: string
                    example: 'banzaicloud'
                image:
                    example: ['nginx:latest', 'busybox:latest']
                    type: array
                    items:
                        type: string
                result:
                    example: ['nginx:latest policy check failed', 'busybox:latest policy sheck success']
                    type: array
                    items:
                        type: string
                action:
                    example: 'allow'
                    type: string
                    enum: [allow, reject]

        ReleaseWhiteList:
            type: array
            items:
                $ref: "#/components/schemas/ReleaseWhiteListItem"

        ReleaseWhiteListItem:
            type: object
            required:
                - name
                - owner
            properties:
                name:
                    type: string
                    example: 'flying-monkey-wl'
                owner:
                    type: string
                    example: 'banzaicloud'
                reason:
                    example: 'test release'
                    type: string

        PolicyBundle:
            description: A bundle containing a set of policies, whitelists, and rules for mapping them to specific images
            type: object
            required:
                - id
                - version
                - policies
                - mappings
            properties:
                id:
                    type: string
                    description: Id of the bundle
                name:
                    type: string
                    description: Human readable name for the bundle
                comment:
                    type: string
                    description: Description of the bundle, human readable
                version:
                    type: string
                    description: Version id for this bundle format
                whitelists:
                    description: Whitelists which define which policy matches to disregard explicitly in the final policy decision
                    type: array
                    items:
                        $ref: "#/components/schemas/Whitelist"
                policies:
                    description: Policies which define the go/stop/warn status of an image using rule matches on image properties
                    type: "array"
                    items:
                        $ref: "#/components/schemas/Policy"
                mappings:
                    description: Mapping rules for defining which policy and whitelist(s) to apply to an image based on a match of the image tag or id. Evaluated in order.
                    type: "array"
                    items:
                        $ref: "#/components/schemas/MappingRule"
                whitelistedImages:
                    description: List of mapping rules that define which images should always be passed (unless also on the blacklist), regardless of policy result.
                    type: array
                    items:
                        $ref: "#/components/schemas/ImageSelectionRule"
                blacklistedImages:
                    description: List of mapping rules that define which images should always result in a STOP/FAIL policy result regardless of policy content or presence in whitelisted_images
                    type: array
                    items:
                        $ref: "#/components/schemas/ImageSelectionRule"
        WhitelistItem:
            type: object
            description: Identifies a specific gate and trigger match from a policy against an image and indicates it should be ignored in final policy decisions
            required:
                - gate
                - trigger_id
            properties:
                id:
                    type: string
                gate:
                    type: string
                trigger_id:
                    type: string
        PolicyRule:
            type: object
            description: A rule that defines and decision value if the match is found true for a given image.
            required:
                - gate
                - trigger
                - action
            properties:
                id:
                    type: string
                gate:
                    type: string
                trigger:
                    type: string
                action:
                    enum:
                        - GO
                        - STOP
                        - WARN
                params:
                    type: array
                    items:
                        type: object
                        required:
                            - name
                            - value
                        properties:
                            name:
                                type: string
                            value:
                                type: string
        Whitelist:
            type: object
            description: A collection of whitelist items to match a policy evaluation against.
            required:
                - id
                - version
            properties:
                id:
                    type: string
                name:
                    type: string
                version:
                    type: string
                comment:
                    type: string
                items:
                    type: array
                    items:
                        $ref: "#/components/schemas/WhitelistItem"
        ImageRef:
            type: object
            description: A reference to an image
            required:
                - type
                - value
            properties:
                type:
                    enum:
                        - tag
                        - digest
                        - id
                value:
                    type: string
        Policy:
            type: object
            required:
                - id
                - version
            properties:
                id:
                    type: string
                name:
                    type: string
                comment:
                    type: string
                version:
                    type: string
                rules:
                    type: array
                    items:
                        $ref: "#/components/schemas/PolicyRule"
        ImageSelectionRule:
            type: object
            required:
                - "name"
                - "registry"
                - "repository"
                - "image"
            properties:
                id:
                    type: string
                name:
                    type: string
                registry:
                    type: string
                repository:
                    type: string
                image:
                    $ref: "#/components/schemas/ImageRef"
        MappingRule:
            type: object
            required:
                - name
                - registry
                - repository
                - image
            properties:
                id:
                    type: string
                name:
                    type: string
                whitelistIds:
                    type: array
                    items:
                        type: string
                policyId:
                    type: string
                    description: Optional single policy to evalute, if set will override any value in policy_ids, for backwards compatibility. Generally, policy_ids should be used even with a array of length 1.
                policyIds:
                    type: array
                    description: List of policyIds to evaluate in order, to completion
                    items:
                        type: string
                        description: PolicyId to evaluate
                registry:
                    type: string
                repository:
                    type: string
                image:
                    $ref: "#/components/schemas/ImageRef"
        PolicyBundleRecord:
            description: A policy bundle plus some metadata
            type: object
            properties:
                createdAt:
                    type: string
                    format: "date-time"
                lastUpdated:
                    type: string
                    format: "date-time"
                policyId:
                    type: string
                    description: The bundle's identifier
                active:
                    type: boolean
                    description: True if the bundle is currently defined to be used automatically
                userId:
                    type: string
                    description: UserId of the user that owns the bundle
                policySource:
                    type: string
                    description: Source location of where the policy bundle originated
                policybundle:
                    $ref: "#/components/schemas/PolicyBundle"
        PolicyBundleList:
            type: array
            description: List of PolicyBundleRecord objects
            items:
                $ref: "#/components/schemas/PolicyBundleRecord"
        ImageContent:
            type: object
            description: A metadata content record for a specific image, containing different content type entries
        ImageDetail:
            type: object
            description: A metadata detail record for a specific image. Multiple detail records may map a single catalog image.
            properties:
                createdAt:
                    type: string
                    format: "date-time"
                lastUpdated:
                    type: string
                    format: "date-time"
                fulltag:
                    description: "Full docker-pullalbe tag string referencing the image"
                    type: string
                fulldigest:
                    description: "Full docker-pullable digest string including the registry url and repository necessary get the image"
                    type: string
                userId:
                    type: string
                imageId:
                    type: string
                registry:
                    type: string
                repo:
                    type: string
                dockerfile:
                    type: string
                    x-nullable: True
                imageDigest:
                    type: string
                    description: The parent Anchore Image record to which this detail maps

        DeploymentImageList:
            type: array
            items:
                $ref: "#/components/schemas/ClusterImage"

        ClusterImageList:
            type: array
            items:
                $ref: "#/components/schemas/ClusterImage"

        ClusterImage:
            type: object
            properties:
                imageName:
                    type: string
                    example: 'docker.io/alpine'
                imageTag:
                    type: string
                    example: 'latest'
                imageDigest:
                    type: string

        AnchoreImageList:
            type: array
            items:
                $ref: "#/components/schemas/AnchoreImage"

        AnchoreImage:
            description: A unique image in the engine. May have multiple tags or references. Unique to an image content across registries or repositories.
            type: object
            properties:
                imageContent:
                    $ref: '#/components/schemas/ImageContent'
                imageDetail:
                    type: array
                    description: Details specific to an image reference and type such as tag and image source
                    items:
                        $ref: '#/components/schemas/ImageDetail'
                lastUpdated:
                    type: string
                    format: "date-time"
                createdAt:
                    type: string
                    format: "date-time"
                imageDigest:
                    type: string
                userId:
                    type: string
                imageStatus:
                    type: string
                    description: State of the image
                    enum:
                        - active
                        - inactive
                        - disabled
                analysisStatus:
                    type: string
                    description: A state value for the current status of the analysis progress of the image
                    enum:
                        - not_analyzed
                        - analyzing
                        - analyzed
                        - analysis_failed

        Vulnerability:
            type: object
            properties:
                vuln:
                    type: string
                    description: The vulnerability identifier, such as CVE-2017-100, or RHSA-2017123
                fix:
                    type: string
                    description: The package containing a fix, if available
                severity:
                    type: string
                    description: The severity of the vulnerability
                package:
                    type: string
                    description: The package name and version that are vulnerable in the image
                url:
                    type: string
                    description: The url for more information about the vulnerability
                feed:
                    type: string
                    description: The name of the feed where vulnerability match was made
                feedGroup:
                    type: string
                    description: The name of the feed group where vulnerability match was made
                packageName:
                    type: string
                    description: The name of the vulnerable package artifact
                packageVersion:
                    type: string
                    description: The version of the vulnerable package artifact
                packageType:
                    type: string
                    description: The type of vulnerable package
                packageCpe:
                    type: string
                    description: The CPE string (if applicable) describing the package to vulnerability match
                packagePath:
                    type: string
                    description: The location (if applicable) of the vulnerable package in the   container filesystem

        VulnerabilityList:
            type: array
            description: List of Vulnerability objects
            items:
                $ref: '#/components/schemas/Vulnerability'

        VulnerabilityResponse:
            description: envelope containing list of vulnerabilities
            type: object
            properties:
                imageDigest:
                    type: string
                vulnerabilityType:
                    type: string
                vulnerabilities:
                    $ref: '#/components/schemas/VulnerabilityList'

        ListProjectsResponse:
            description: wraps a list of project details information
            type: object
            properties:
                projects:
                    type: array
                    items:
                        $ref: '#/components/schemas/ProjectDetails'

        ProjectDetails:
            description: Details of the google project
            type: object
            properties:
                name:
                    type: string
                projectId:
                    type: string
                projectNumber:
                    type: string
                lifecycleState:
                    type: string


